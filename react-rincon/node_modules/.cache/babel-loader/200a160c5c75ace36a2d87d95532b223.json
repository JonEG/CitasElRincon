{"ast":null,"code":"var _jsxFileName = \"/Users/trabajo/Desktop/ELRINCON/react-rincon/src/modules/signin.js\";\nimport React, { useState } from 'react';\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport 'bootstrap/dist/js/bootstrap.bundle.min';\nimport { GoogleLogin } from 'react-google-login';\nimport { Redirect } from \"react-router-dom\";\nimport Swal from 'sweetalert2';\nimport authController from '../controllers/authController';\nimport Nav from '../components/nav';\nimport ProfessionalService from '../services/professional.service';\n\nclass signinComponent extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      redirect: null\n    };\n  }\n\n  responseGoogle(response) {\n    sessionStorage[\"userName\"] = response.profileObj.name;\n    sessionStorage[\"userEmail\"] = response.profileObj.email;\n    sessionStorage[\"userUrl\"] = response.profileObj.imageUrl;\n  }\n\n  render() {\n    if (this.state.redirect) {\n      return /*#__PURE__*/React.createElement(Redirect, {\n        to: this.state.redirect,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 28,\n          columnNumber: 20\n        }\n      });\n    }\n\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 31,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(Nav, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 31,\n        columnNumber: 18\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      class: \"container p-4\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 32,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      class: \"row\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 33,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      class: \"col-md-4 mx-auto\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 34,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      class: \"card text-center\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 35,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      class: \"card-header\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 36,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(\"h1\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 37,\n        columnNumber: 33\n      }\n    }, \"Iniciar Sesi\\xF3n\")), /*#__PURE__*/React.createElement(\"div\", {\n      class: \"card-body\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 39,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(GoogleLogin, {\n      clientId: \"820637070016-genrk31ge28bjg97du1q9bkvsa0p6bdq.apps.googleusercontent.com\",\n      buttonText: \"Iniciar sesion\",\n      onSuccess: res => {\n        this.responseGoogle(res);\n        this.loadUserId();\n        authController.login(() => {\n          this.setState({\n            redirect: \"/crear-perfil\"\n          });\n        });\n      },\n      onFailure: () => console.error('error crack'),\n      cookiePolicy: 'single_host_origin',\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 41,\n        columnNumber: 33\n      }\n    })))))));\n  }\n\n  async loadUserId() {\n    await ProfessionalService.getWithEmail({\n      email: response.profileObj.email\n    }).then(res => {\n      if (res.data.success) {\n        const {\n          id\n        } = res.data.data[0];\n        sessionStorage[\"userId\"] = id;\n      } else {\n        console.error('Error loading Id');\n      }\n    }).catch(err => {\n      console.error('ERROR server' + err);\n    });\n\n    if (sessionStorage.getItem(\"userId\") == null) {\n      this.setState({\n        redirect: \"/crear-perfil\"\n      });\n    }\n  }\n\n  showLogInError() {\n    if (!sessionStorage.getItem(\"userEmail\")) {\n      Swal.fire({\n        position: 'center',\n        icon: 'error',\n        title: 'Error con el inicio de sesión!',\n        showConfirmButton: false,\n        timer: 2000\n      });\n    }\n  }\n\n}\n\nexport default signinComponent;","map":{"version":3,"sources":["/Users/trabajo/Desktop/ELRINCON/react-rincon/src/modules/signin.js"],"names":["React","useState","GoogleLogin","Redirect","Swal","authController","Nav","ProfessionalService","signinComponent","Component","constructor","props","state","redirect","responseGoogle","response","sessionStorage","profileObj","name","email","imageUrl","render","res","loadUserId","login","setState","console","error","getWithEmail","then","data","success","id","catch","err","getItem","showLogInError","fire","position","icon","title","showConfirmButton","timer"],"mappings":"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","sourcesContent":["import React, { useState } from 'react';\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport 'bootstrap/dist/js/bootstrap.bundle.min';\nimport { GoogleLogin } from 'react-google-login';\nimport { Redirect } from \"react-router-dom\";\nimport Swal from 'sweetalert2';\nimport authController from '../controllers/authController';\nimport Nav from '../components/nav';\nimport ProfessionalService from '../services/professional.service';\n\nclass signinComponent extends React.Component {\n\n    constructor(props) {\n        super(props);\n        this.state = {\n            redirect: null\n        };\n    }\n\n    responseGoogle (response) {\n        sessionStorage[\"userName\"] = response.profileObj.name;\n        sessionStorage[\"userEmail\"] = response.profileObj.email;\n        sessionStorage[\"userUrl\"] = response.profileObj.imageUrl;\n    }\n    \n    render() {\n        if (this.state.redirect) {\n            return <Redirect to={this.state.redirect} />\n        }\n        return (\n            <div><Nav/>\n            <div class=\"container p-4\">\n                <div class=\"row\">\n                    <div class=\"col-md-4 mx-auto\">\n                        <div class=\"card text-center\">\n                            <div class=\"card-header\">\n                                <h1>Iniciar Sesión</h1>\n                            </div>\n                            <div class=\"card-body\">\n                                {\n                                <GoogleLogin\n                                    clientId=\"820637070016-genrk31ge28bjg97du1q9bkvsa0p6bdq.apps.googleusercontent.com\"\n                                    buttonText=\"Iniciar sesion\"\n                                    onSuccess={ (res) => {\n                                        this.responseGoogle(res);\n                                        this.loadUserId();\n                                        authController.login(()=>{\n                                            this.setState({redirect: \"/crear-perfil\"})\n                                        }\n                                        );\n                                    }}\n                                \n                                    onFailure={ () => console.error('error crack')}\n                                    cookiePolicy={'single_host_origin'}\n                                />}\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n            </div>\n        );\n    }\n\n    async loadUserId() {\n        await ProfessionalService.getWithEmail({email: response.profileObj.email})\n            .then(res => {\n                if (res.data.success) {\n                    const { id } = res.data.data[0];\n                    sessionStorage[\"userId\"] = id;\n                } else {\n                    console.error('Error loading Id');\n                }\n            })\n            .catch(err => {\n                console.error('ERROR server' + err);\n            });\n\n        if(sessionStorage.getItem(\"userId\")==null){\n            this.setState({redirect : \"/crear-perfil\"});\n        }\n    }\n\n    showLogInError(){\n        if(!sessionStorage.getItem(\"userEmail\")){\n            Swal.fire({\n                position: 'center',\n                icon: 'error',\n                title: 'Error con el inicio de sesión!',\n                showConfirmButton: false,\n                timer: 2000\n            });\n        }\n        \n    }\n}\n\nexport default signinComponent;"]},"metadata":{},"sourceType":"module"}