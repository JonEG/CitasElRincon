{"ast":null,"code":"var _jsxFileName = \"/Users/trabajo/Desktop/ELRINCON/react-rincon/src/modules/createProfile.js\";\nimport React from 'react';\nimport '../../node_modules/bootstrap/dist/css/bootstrap.min.css';\nimport '../../node_modules/bootstrap/dist/js/bootstrap.bundle.min';\nimport { Redirect } from \"react-router-dom\";\nimport ProfessionalService from '../services/professional.service';\nimport ProfileController from '../controllers/profileController';\nimport Swal from 'sweetalert2';\nimport $ from 'jquery';\nimport Nav from '../components/nav';\n\nclass profileComponent extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      redirect: null,\n      allowCreation: false,\n      departments: [],\n      roles: [],\n      tutors: [],\n      name: sessionStorage.getItem(\"userName\"),\n      departmentId: null,\n      roleId: null,\n      email: sessionStorage.getItem(\"userEmail\"),\n      tutorId: null,\n      comment: \"\",\n      image: null\n    };\n  }\n\n  componentDidMount() {\n    this.allowUserCreation();\n    ProfileController.loadDepartments().then(each => this.setState({\n      departments: each\n    })); //this.queryDropdowns();\n  }\n\n  async allowUserCreation() {\n    const {\n      redirect,\n      allowCreation\n    } = await ProfileController.loadUserId();\n\n    if (redirect) {\n      this.setState({\n        redirect\n      });\n    } else if (allowCreation) {\n      this.setState({\n        allowCreation\n      });\n    }\n  }\n\n  async queryDropdowns() {\n    this.setState({\n      departments: await ProfileController.queryDepartments(),\n      roles: await ProfileController.queryRoles(),\n      tutors: await ProfileController.queryTutors()\n    });\n  }\n\n  async cargarDepartamentos() {\n    return await ProfileController.loadDepartments();\n  }\n\n  render() {\n    if (this.state.redirect) {\n      return /*#__PURE__*/React.createElement(Redirect, {\n        to: this.state.redirect,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 65,\n          columnNumber: 20\n        }\n      });\n    } else if (this.state.allowCreation) {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 68,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(Nav, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 69,\n          columnNumber: 21\n        }\n      }), /*#__PURE__*/React.createElement(\"div\", {\n        class: \"container p-4\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 70,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(\"script\", {\n        src: \"https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 71,\n          columnNumber: 25\n        }\n      }), /*#__PURE__*/React.createElement(\"div\", {\n        class: \"row\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 72,\n          columnNumber: 25\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        class: \"col-lg-9\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 73,\n          columnNumber: 29\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        class: \"card\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 74,\n          columnNumber: 33\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        class: \"card-body\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 75,\n          columnNumber: 37\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        class: \"form-group \",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 76,\n          columnNumber: 41\n        }\n      }, /*#__PURE__*/React.createElement(\"input\", {\n        type: \"text\",\n        value: this.state.name,\n        onChange: value => this.setState({\n          name: value.target.value\n        }),\n        class: \"form-control\",\n        name: \"nombre\",\n        placeholder: \"Nombre\",\n        autofocus: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 77,\n          columnNumber: 45\n        }\n      })), /*#__PURE__*/React.createElement(\"div\", {\n        class: \"row\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 84,\n          columnNumber: 41\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        class: \"col-lg-3\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 85,\n          columnNumber: 45\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        class: \"form-group\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 86,\n          columnNumber: 49\n        }\n      }, /*#__PURE__*/React.createElement(\"select\", {\n        class: \"form-control\",\n        onChange: value => this.setState({\n          departmentId: value.target.value\n        }),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 87,\n          columnNumber: 53\n        }\n      }, /*#__PURE__*/React.createElement(\"option\", {\n        selected: true,\n        disabled: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 89,\n          columnNumber: 57\n        }\n      }, \"Departamento\"), this.state.deparmtents))), /*#__PURE__*/React.createElement(\"div\", {\n        class: \"col-lg-2\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 96,\n          columnNumber: 45\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        class: \"form-group\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 97,\n          columnNumber: 49\n        }\n      }, /*#__PURE__*/React.createElement(\"select\", {\n        class: \"form-control\",\n        onChange: value => this.setState({\n          roleId: value.target.value\n        }),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 98,\n          columnNumber: 53\n        }\n      }, /*#__PURE__*/React.createElement(\"option\", {\n        selected: true,\n        disabled: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 100,\n          columnNumber: 57\n        }\n      }, \"Rol\"), async () => await ProfileController.loadRoles()))), /*#__PURE__*/React.createElement(\"div\", {\n        class: \"col-lg-3\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 106,\n          columnNumber: 45\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        class: \"form-group\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 107,\n          columnNumber: 49\n        }\n      }, /*#__PURE__*/React.createElement(\"select\", {\n        class: \"form-control\",\n        onChange: value => this.setState({\n          tutorId: value.target.value\n        }),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 108,\n          columnNumber: 53\n        }\n      }, /*#__PURE__*/React.createElement(\"option\", {\n        selected: true,\n        disabled: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 110,\n          columnNumber: 57\n        }\n      }, \"Tutor\\xEDa\"), async () => await ProfileController.loadTutors())))), /*#__PURE__*/React.createElement(\"div\", {\n        class: \"form-group\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 118,\n          columnNumber: 41\n        }\n      }, /*#__PURE__*/React.createElement(\"textarea\", {\n        class: \"form-control\",\n        onChange: value => this.setState({\n          comment: value.target.value\n        }),\n        placeholder: \"Introduzca si lo desea alg\\xFAn comentario: Me gusta J\",\n        rows: \"3\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 119,\n          columnNumber: 45\n        }\n      })), /*#__PURE__*/React.createElement(\"div\", {\n        class: \"form-group\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 125,\n          columnNumber: 41\n        }\n      }, /*#__PURE__*/React.createElement(\"button\", {\n        type: \"submit\",\n        class: \"btn btn-success\",\n        onClick: () => this.addProfessional(),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 126,\n          columnNumber: 45\n        }\n      }, \"A\\xF1adir\"))))), /*#__PURE__*/React.createElement(\"div\", {\n        class: \"col-lg-3\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 132,\n          columnNumber: 29\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        class: \"card\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 133,\n          columnNumber: 33\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        class: \"card-body text-center\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 134,\n          columnNumber: 37\n        }\n      }, /*#__PURE__*/React.createElement(\"form\", {\n        class: \"md-form\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 135,\n          columnNumber: 41\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        class: \"file-field\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 136,\n          columnNumber: 45\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        class: \"md-4\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 137,\n          columnNumber: 49\n        }\n      }, /*#__PURE__*/React.createElement(\"img\", {\n        src: require(\"../images/profile-picture.jpg\"),\n        ref: profilePicture => this.myProfilePicture = profilePicture,\n        id: \"blah\",\n        class: \"rounded-circle z-depth-1-half avatar-pic img-fluid img-thumbnail\",\n        alt: \"avatar\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 138,\n          columnNumber: 53\n        }\n      }), /*#__PURE__*/React.createElement(\"div\", {\n        style: {\n          marginTop: \"10px\"\n        },\n        class: \"d-flex\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 144,\n          columnNumber: 53\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        class: \"btn btn-mdb-color btn-rounded float-left custom-file\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 145,\n          columnNumber: 57\n        }\n      }, /*#__PURE__*/React.createElement(\"input\", {\n        style: {\n          width: \"100%\"\n        },\n        ref: myElement => this.myFileElement = myElement,\n        type: \"file\",\n        id: \"imgInput\",\n        className: \"custom-file-input btn btn-primary\",\n        onChange: value => {\n          this.readURL(value.target);\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 146,\n          columnNumber: 61\n        }\n      }), /*#__PURE__*/React.createElement(\"label\", {\n        class: \"custom-file-label\",\n        for: \"customFile\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 152,\n          columnNumber: 61\n        }\n      }, \"Perfil\"))))))))))));\n    } else {\n      return null;\n    }\n  }\n\n  readURL(input) {\n    if (input.files && input.files[0]) {\n      var reader = new FileReader();\n      const myValue = input.files[0];\n\n      if (myValue.type.includes(\"image\")) {\n        reader.onload = event => $('#blah').attr('src', event.target.result);\n\n        reader.readAsDataURL(myValue); // convert to base64 string\n\n        this.state.image = {\n          name: myValue.name,\n          type: myValue.type,\n          data: myValue\n        };\n      } else {\n        Swal.fire({\n          position: 'top',\n          icon: 'error',\n          title: 'Sólo archivos de tipo imagen!',\n          showConfirmButton: false,\n          timer: 2000\n        });\n      }\n    }\n  }\n\n  validateFields() {\n    let emptyFields = \"\";\n    let count = 0;\n    const nombre = this.state.name;\n\n    if (nombre.replace(/\\s/g, \"\").length == 0) {\n      emptyFields += \" Nombre \";\n      count++;\n    }\n\n    if (this.state.departmentId == null) {\n      emptyFields += \" Departamento \";\n      count++;\n    }\n\n    if (this.state.roleId == null) {\n      emptyFields += \" Rol \";\n      count++;\n    } //If there are errors\n\n\n    if (count > 0) {\n      Swal.fire({\n        position: 'center',\n        icon: 'error',\n        title: (count == 1 ? \"Falta el campo\" : \"Faltan los campos: \") + emptyFields,\n        showConfirmButton: false,\n        timer: 2000\n      });\n      return false;\n    } else {\n      return true;\n    }\n  }\n\n  addProfessional() {\n    if (this.validateFields() == false) {\n      return;\n    }\n\n    const datapost = {\n      name: this.state.name,\n      departmentId: this.state.departmentId,\n      roleId: this.state.roleId,\n      email: this.state.email,\n      tutorId: this.state.tutorId,\n      comment: this.state.comment,\n      image: this.state.image\n    };\n    ProfessionalService.create(datapost).then(async res => {\n      if (res.data.success) {\n        await Swal.fire({\n          position: 'top',\n          icon: 'success',\n          title: '¡Enhorabuena, ya tiene perfil!',\n          showConfirmButton: false,\n          timer: 2000\n        });\n        this.setState({\n          redirect: \"/\"\n        });\n      } else {\n        console.error(\"Error\");\n      }\n    }).catch(error => {\n      console.error(\"Error 34 \" + error);\n    });\n  }\n\n}\n\nexport default profileComponent;","map":{"version":3,"sources":["/Users/trabajo/Desktop/ELRINCON/react-rincon/src/modules/createProfile.js"],"names":["React","Redirect","ProfessionalService","ProfileController","Swal","$","Nav","profileComponent","Component","constructor","props","state","redirect","allowCreation","departments","roles","tutors","name","sessionStorage","getItem","departmentId","roleId","email","tutorId","comment","image","componentDidMount","allowUserCreation","loadDepartments","then","each","setState","loadUserId","queryDropdowns","queryDepartments","queryRoles","queryTutors","cargarDepartamentos","render","value","target","deparmtents","loadRoles","loadTutors","addProfessional","require","profilePicture","myProfilePicture","marginTop","width","myElement","myFileElement","readURL","input","files","reader","FileReader","myValue","type","includes","onload","event","attr","result","readAsDataURL","data","fire","position","icon","title","showConfirmButton","timer","validateFields","emptyFields","count","nombre","replace","length","datapost","create","res","success","console","error","catch"],"mappings":"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","sourcesContent":["import React from 'react';\n\nimport '../../node_modules/bootstrap/dist/css/bootstrap.min.css';\nimport '../../node_modules/bootstrap/dist/js/bootstrap.bundle.min';\n\nimport { Redirect } from \"react-router-dom\";\n\nimport ProfessionalService from '../services/professional.service';\nimport ProfileController from '../controllers/profileController';\n\nimport Swal from 'sweetalert2';\nimport $ from 'jquery';\n\nimport Nav from '../components/nav';\n\nclass profileComponent extends React.Component {\n\n    constructor(props) {\n        super(props);\n        this.state = {\n            redirect: null,\n            allowCreation: false,\n            departments: [],\n            roles: [],\n            tutors: [],\n            name: sessionStorage.getItem(\"userName\"),\n            departmentId: null,\n            roleId: null,\n            email: sessionStorage.getItem(\"userEmail\"),\n            tutorId: null,\n            comment: \"\",\n            image: null\n        };\n    }\n\n    componentDidMount() {\n        this.allowUserCreation();\n        ProfileController.loadDepartments().then(each => this.setState({departments: each}));\n        //this.queryDropdowns();\n    }\n\n    async allowUserCreation(){\n        const {redirect,allowCreation}= await ProfileController.loadUserId();\n        if(redirect){\n            this.setState({redirect});\n        } else if(allowCreation){\n            this.setState({allowCreation});\n        }\n    }\n\n    async queryDropdowns() {\n        this.setState({\n            departments: await ProfileController.queryDepartments(),\n            roles: await ProfileController.queryRoles(),\n            tutors: await ProfileController.queryTutors()\n        });\n    }\n\n    async cargarDepartamentos(){\n        return await ProfileController.loadDepartments();\n    }\n\n    render() {\n        if (this.state.redirect) {\n            return <Redirect to={this.state.redirect} />\n        } else if (this.state.allowCreation) {\n            return (\n                <div>\n                    <Nav/>\n                    <div class=\"container p-4\">\n                        <script src=\"https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js\"></script>\n                        <div class=\"row\">\n                            <div class=\"col-lg-9\">\n                                <div class=\"card\">\n                                    <div class=\"card-body\">\n                                        <div class=\"form-group \">\n                                            <input type=\"text\"\n                                                value={this.state.name}\n                                                onChange={(value) => this.setState({ name: value.target.value })}\n                                                class=\"form-control\" name=\"nombre\" placeholder=\"Nombre\" autofocus\n                                            />\n                                        </div>\n\n                                        <div class=\"row\">\n                                            <div class=\"col-lg-3\">\n                                                <div class=\"form-group\">\n                                                    <select class=\"form-control\"\n                                                        onChange={(value) => this.setState({ departmentId: value.target.value })} >\n                                                        <option selected disabled>Departamento</option>\n                                                        {this.state.deparmtents}\n\n                                                    </select>\n                                                </div>\n                                            </div>\n\n                                            <div class=\"col-lg-2\">\n                                                <div class=\"form-group\">\n                                                    <select class=\"form-control\"\n                                                        onChange={(value) => this.setState({ roleId: value.target.value })} >\n                                                        <option selected disabled >Rol</option>\n                                                        {async ()=> await ProfileController.loadRoles()}\n                                                    </select>\n                                                </div>\n                                            </div>\n\n                                            <div class=\"col-lg-3\">\n                                                <div class=\"form-group\">\n                                                    <select class=\"form-control\"\n                                                        onChange={(value) => this.setState({ tutorId: value.target.value })} >\n                                                        <option selected disabled >Tutoría</option>\n                                                        {async ()=> await ProfileController.loadTutors()}\n                                                    </select>\n                                                </div>\n                                            </div>\n\n                                        </div>\n\n                                        <div class=\"form-group\">\n                                            <textarea class=\"form-control\"\n                                                onChange={(value) => this.setState({ comment: value.target.value })}\n                                                placeholder=\"Introduzca si lo desea algún comentario: Me gusta J\"\n                                                rows=\"3\"></textarea>\n                                        </div>\n\n                                        <div class=\"form-group\">\n                                            <button type=\"submit\" class=\"btn btn-success\" onClick={() => this.addProfessional()}>Añadir</button>\n                                        </div>\n                                    </div>\n                                </div>\n                            </div>\n\n                            <div class=\"col-lg-3\">\n                                <div class=\"card\">\n                                    <div class=\"card-body text-center\">\n                                        <form class=\"md-form\">\n                                            <div class=\"file-field\">\n                                                <div class=\"md-4\" >\n                                                    <img src={require(\"../images/profile-picture.jpg\")}\n                                                        ref={profilePicture => this.myProfilePicture = profilePicture}\n                                                        id=\"blah\"\n                                                        class=\"rounded-circle z-depth-1-half avatar-pic img-fluid img-thumbnail\" alt=\"avatar\"\n                                                    />\n\n                                                    <div style={{ marginTop: \"10px\" }} class=\"d-flex\" >\n                                                        <div class=\"btn btn-mdb-color btn-rounded float-left custom-file\">\n                                                            <input style={{ width: \"100%\" }} ref={(myElement) => this.myFileElement = myElement}\n                                                                type=\"file\"\n                                                                id=\"imgInput\"\n                                                                className=\"custom-file-input btn btn-primary\"\n                                                                onChange={(value) => { this.readURL(value.target) }}\n                                                            />\n                                                            <label class=\"custom-file-label\" for=\"customFile\">Perfil</label>\n                                                        </div>\n                                                    </div>\n                                                </div>\n\n                                            </div>\n                                        </form>\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            );\n        } else {\n            return null;\n        }\n    }\n\n    readURL(input) {\n        if (input.files && input.files[0]) {\n            var reader = new FileReader();\n\n            const myValue = input.files[0];\n\n            if (myValue.type.includes(\"image\")) {\n                reader.onload = (event) => $('#blah').attr('src', event.target.result);\n                reader.readAsDataURL(myValue); // convert to base64 string\n\n                this.state.image = {\n                    name: myValue.name,\n                    type: myValue.type,\n                    data: myValue\n                }\n            } else {\n                Swal.fire({\n                    position: 'top',\n                    icon: 'error',\n                    title: 'Sólo archivos de tipo imagen!',\n                    showConfirmButton: false,\n                    timer: 2000\n                })\n            }\n\n\n        }\n    }\n\n    validateFields() {\n        let emptyFields = \"\";\n        let count = 0;\n        const nombre = this.state.name;\n\n        if (nombre.replace(/\\s/g, \"\").length == 0) {\n            emptyFields += \" Nombre \";\n            count++;\n        }\n        if (this.state.departmentId == null) {\n            emptyFields += \" Departamento \";\n            count++;\n        }\n        if (this.state.roleId == null) {\n            emptyFields += \" Rol \";\n            count++;\n        }\n\n        //If there are errors\n        if (count > 0) {\n            Swal.fire({\n                position: 'center',\n                icon: 'error',\n                title: (count == 1 ? \"Falta el campo\" : \"Faltan los campos: \") + emptyFields,\n                showConfirmButton: false,\n                timer: 2000\n            })\n            return false;\n        } else {\n            return true;\n        }\n\n    }\n\n    addProfessional() {\n        if (this.validateFields() == false) {\n            return;\n        }\n\n        const datapost = {\n            name: this.state.name,\n            departmentId: this.state.departmentId,\n            roleId: this.state.roleId,\n            email: this.state.email,\n            tutorId: this.state.tutorId,\n            comment: this.state.comment,\n            image: this.state.image\n        }\n\n        ProfessionalService.create(datapost)\n            .then(async res => {\n                if (res.data.success) {\n                    await Swal.fire({\n                        position: 'top',\n                        icon: 'success',\n                        title: '¡Enhorabuena, ya tiene perfil!',\n                        showConfirmButton: false,\n                        timer: 2000\n                    })\n\n                    this.setState({ redirect: \"/\" });\n                }\n                else {\n                    console.error(\"Error\");\n                }\n            }).catch(error => {\n                console.error(\"Error 34 \" + error);\n            });\n    }\n}\n\n\n\nexport default profileComponent;"]},"metadata":{},"sourceType":"module"}