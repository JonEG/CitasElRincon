{"ast":null,"code":"import _classCallCheck from\"/Users/trabajo/Desktop/ELRINCON/react-rincon/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/trabajo/Desktop/ELRINCON/react-rincon/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/trabajo/Desktop/ELRINCON/react-rincon/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/trabajo/Desktop/ELRINCON/react-rincon/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React from'react';import'../../node_modules/bootstrap/dist/css/bootstrap.min.css';import'../../node_modules/bootstrap/dist/js/bootstrap.bundle.min';import ProfessionalService from'../services/professional.service';import DepartmentService from'../services/department.service';import TutorService from'../services/tutor.service';import RoleService from'../services/role.service';import Swal from'sweetalert2';import $ from'jquery';var profileComponent=/*#__PURE__*/function(_React$Component){_inherits(profileComponent,_React$Component);var _super=_createSuper(profileComponent);function profileComponent(props){var _this;_classCallCheck(this,profileComponent);_this=_super.call(this,props);_this.formatImage=function(value){console.log(value.target.files[0]);};_this.state={departments:[],roles:[],tutors:[],name:sessionStorage.getItem(\"userName\"),departmentId:null,roleId:null,email:sessionStorage.getItem(\"userEmail\"),tutorId:null,comment:\"\",image:null};return _this;}_createClass(profileComponent,[{key:\"componentDidMount\",value:function componentDidMount(){this.queryDepartments();this.queryRoles();this.queryTutors();}},{key:\"queryDepartments\",value:function queryDepartments(){var _this2=this;DepartmentService.getAll().then(function(res){if(res.data.success){var data=res.data.data;_this2.setState({departments:data});}else{alert('Error web service');}}).catch(function(err){alert('ERROR server'+err);});}},{key:\"queryRoles\",value:function queryRoles(){var _this3=this;RoleService.getAll().then(function(res){if(res.data.success){var data=res.data.data;_this3.setState({roles:data});}else{alert('Error web service');}}).catch(function(err){alert('ERROR server'+err);});}},{key:\"queryTutors\",value:function queryTutors(){var _this4=this;TutorService.getAll().then(function(res){if(res.data.success){var data=res.data.data;_this4.setState({tutors:data});}else{alert('Error web service');}}).catch(function(err){alert('ERROR server'+err);});}},{key:\"render\",value:function render(){var _this5=this;return/*#__PURE__*/React.createElement(\"div\",{class:\"container p-4\"},/*#__PURE__*/React.createElement(\"script\",{src:\"https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js\"}),/*#__PURE__*/React.createElement(\"div\",{class:\"row\"},/*#__PURE__*/React.createElement(\"div\",{class:\"col-lg-9\"},/*#__PURE__*/React.createElement(\"div\",{class:\"card\"},/*#__PURE__*/React.createElement(\"div\",{class:\"card-body\"},/*#__PURE__*/React.createElement(\"div\",{class:\"form-group \"},/*#__PURE__*/React.createElement(\"input\",{type:\"text\",value:this.state.name,onChange:function onChange(value){return _this5.setState({name:value.target.value});},class:\"form-control\",name:\"nombre\",placeholder:\"Nombre\",autofocus:true})),/*#__PURE__*/React.createElement(\"div\",{class:\"row\"},/*#__PURE__*/React.createElement(\"div\",{class:\"col-lg-3\"},/*#__PURE__*/React.createElement(\"div\",{class:\"form-group\"},/*#__PURE__*/React.createElement(\"select\",{class:\"form-control\",onChange:function onChange(value){return _this5.setState({departmentId:value.target.value});}},/*#__PURE__*/React.createElement(\"option\",{selected:true,disabled:true},\"Departamento\"),this.loadDepartments()))),/*#__PURE__*/React.createElement(\"div\",{class:\"col-lg-2\"},/*#__PURE__*/React.createElement(\"div\",{class:\"form-group\"},/*#__PURE__*/React.createElement(\"select\",{class:\"form-control\",onChange:function onChange(value){return _this5.setState({roleId:value.target.value});}},/*#__PURE__*/React.createElement(\"option\",{selected:true,disabled:true},\"Rol\"),this.loadRoles()))),/*#__PURE__*/React.createElement(\"div\",{class:\"col-lg-3\"},/*#__PURE__*/React.createElement(\"div\",{class:\"form-group\"},/*#__PURE__*/React.createElement(\"select\",{class:\"form-control\",onChange:function onChange(value){return _this5.setState({tutorId:value.target.value});}},/*#__PURE__*/React.createElement(\"option\",{selected:true,disabled:true},\"Tutor\\xEDa\"),this.loadTutors())))),/*#__PURE__*/React.createElement(\"div\",{class:\"form-group\"},/*#__PURE__*/React.createElement(\"textarea\",{class:\"form-control\",onChange:function onChange(value){return _this5.setState({comment:value.target.value});},placeholder:\"Introduzca si lo desea alg\\xFAn comentario: Me gusta J\",rows:\"3\"})),/*#__PURE__*/React.createElement(\"div\",{class:\"form-group\"},/*#__PURE__*/React.createElement(\"button\",{type:\"submit\",class:\"btn btn-success\",onClick:function onClick(){return _this5.addProfessional();}},\"A\\xF1adir\"))))),/*#__PURE__*/React.createElement(\"div\",{class:\"col-lg-3\"},/*#__PURE__*/React.createElement(\"div\",{class:\"card\"},/*#__PURE__*/React.createElement(\"div\",{class:\"card-body text-center\"},/*#__PURE__*/React.createElement(\"form\",{class:\"md-form\"},/*#__PURE__*/React.createElement(\"div\",{class:\"file-field\"},/*#__PURE__*/React.createElement(\"div\",{class:\"md-4\"},/*#__PURE__*/React.createElement(\"img\",{src:require(\"../images/profile-picture.jpg\"),ref:function ref(profilePicture){return _this5.myProfilePicture=profilePicture;},id:\"blah\",class:\"rounded-circle z-depth-1-half avatar-pic img-fluid img-thumbnail\",alt:\"avatar\"}),/*#__PURE__*/React.createElement(\"div\",{style:{marginTop:\"10px\"},class:\"d-flex\"},/*#__PURE__*/React.createElement(\"div\",{class:\"btn btn-mdb-color btn-rounded float-left custom-file\"},/*#__PURE__*/React.createElement(\"input\",{style:{width:\"100%\"},ref:function ref(myElement){return _this5.myFileElement=myElement;},type:\"file\",id:\"imgInput\",className:\"custom-file-input btn btn-primary\",onChange:function onChange(value){_this5.readURL(value.target);}}),/*#__PURE__*/React.createElement(\"label\",{class:\"custom-file-label\",for:\"customFile\"},\"Perfil\")))))))))));}},{key:\"loadDepartments\",value:function loadDepartments(){return this.state.departments.map(function(data){if(data){return/*#__PURE__*/React.createElement(\"option\",{value:data.id},data.name);}else{return/*#__PURE__*/React.createElement(\"div\",null);}});}},{key:\"loadRoles\",value:function loadRoles(){return this.state.roles.map(function(data){if(data){return/*#__PURE__*/React.createElement(\"option\",{value:data.id},data.name);}else{return/*#__PURE__*/React.createElement(\"div\",null);}});}},{key:\"loadTutors\",value:function loadTutors(){return this.state.tutors.map(function(data){if(data){return/*#__PURE__*/React.createElement(\"option\",{value:data.id},data.name);}else{return/*#__PURE__*/React.createElement(\"div\",null);}});}},{key:\"readURL\",value:function readURL(input){if(input.files&&input.files[0]){var reader=new FileReader();var myValue=input.files[0];if(myValue.type.includes(\"image\")){reader.onload=function(event){return $('#blah').attr('src',event.target.result);};reader.readAsDataURL(myValue);// convert to base64 string\nthis.state.image={name:myValue.name,type:myValue.type,data:myValue};}else{Swal.fire({position:'top',icon:'error',title:'Sólo archivos de tipo imagen!',showConfirmButton:false,timer:2000});}}}},{key:\"validateFields\",value:function validateFields(){var emptyFields=\"\";var count=0;var nombre=this.state.name;if(nombre.replace(/\\s/g,\"\").length==0){emptyFields+=\" Nombre \";count++;}if(this.state.departmentId==null){emptyFields+=\" Departamento \";count++;}if(this.state.roleId==null){emptyFields+=\" Rol \";count++;}//If there are errors\nif(count>0){Swal.fire({position:'center',icon:'error',title:(count==1?\"Falta el campo\":\"Faltan los campos: \")+emptyFields,showConfirmButton:false,timer:2000});return false;}else{return true;}}},{key:\"addProfessional\",value:function addProfessional(){if(this.validateFields()==false){return;}// parametros de datos post\nvar datapost={name:this.state.name,departmentId:this.state.departmentId,roleId:this.state.roleId,email:this.state.email,tutorId:this.state.tutorId,comment:this.state.comment,image:this.state.image};alert(JSON.stringify(datapost));ProfessionalService.create(datapost).then(function(res){if(res.data.success){//alert(res.data.message);\nSwal.fire({position:'top',icon:'success',title:'Profesional añadido correctamente!',showConfirmButton:false,timer:2000});//this.props.history.push('/list'); \n}else{alert(\"Error\");}}).catch(function(error){alert(\"Error 34 \"+error);});}}]);return profileComponent;}(React.Component);export default profileComponent;","map":{"version":3,"sources":["/Users/trabajo/Desktop/ELRINCON/react-rincon/src/modules/createProfile.js"],"names":["React","ProfessionalService","DepartmentService","TutorService","RoleService","Swal","$","profileComponent","props","formatImage","value","console","log","target","files","state","departments","roles","tutors","name","sessionStorage","getItem","departmentId","roleId","email","tutorId","comment","image","queryDepartments","queryRoles","queryTutors","getAll","then","res","data","success","setState","alert","catch","err","loadDepartments","loadRoles","loadTutors","addProfessional","require","profilePicture","myProfilePicture","marginTop","width","myElement","myFileElement","readURL","map","id","input","reader","FileReader","myValue","type","includes","onload","event","attr","result","readAsDataURL","fire","position","icon","title","showConfirmButton","timer","emptyFields","count","nombre","replace","length","validateFields","datapost","JSON","stringify","create","error","Component"],"mappings":"4nBAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CAEA,MAAO,yDAAP,CACA,MAAO,2DAAP,CAEA,MAAOC,CAAAA,mBAAP,KAAgC,kCAAhC,CACA,MAAOC,CAAAA,iBAAP,KAA8B,gCAA9B,CACA,MAAOC,CAAAA,YAAP,KAAyB,2BAAzB,CACA,MAAOC,CAAAA,WAAP,KAAwB,0BAAxB,CAEA,MAAOC,CAAAA,IAAP,KAAiB,aAAjB,CACA,MAAOC,CAAAA,CAAP,KAAc,QAAd,C,GAEMC,CAAAA,gB,gIAMF,0BAAYC,KAAZ,CAAmB,kDACf,uBAAMA,KAAN,EADe,MAJnBC,WAImB,CAJL,SAACC,KAAD,CAAW,CACrBC,OAAO,CAACC,GAAR,CAAYF,KAAK,CAACG,MAAN,CAAaC,KAAb,CAAmB,CAAnB,CAAZ,EACH,CAEkB,CAEf,MAAKC,KAAL,CAAa,CACTC,WAAW,CAAE,EADJ,CAETC,KAAK,CAAE,EAFE,CAGTC,MAAM,CAAE,EAHC,CAITC,IAAI,CAAEC,cAAc,CAACC,OAAf,CAAuB,UAAvB,CAJG,CAKTC,YAAY,CAAE,IALL,CAMTC,MAAM,CAAE,IANC,CAOTC,KAAK,CAAEJ,cAAc,CAACC,OAAf,CAAuB,WAAvB,CAPE,CAQTI,OAAO,CAAE,IARA,CASTC,OAAO,CAAE,EATA,CAUTC,KAAK,CAAE,IAVE,CAAb,CAFe,aAclB,C,0FAEmB,CAChB,KAAKC,gBAAL,GACA,KAAKC,UAAL,GACA,KAAKC,WAAL,GACH,C,2DAEkB,iBACf5B,iBAAiB,CAAC6B,MAAlB,GACKC,IADL,CACU,SAAAC,GAAG,CAAI,CAET,GAAIA,GAAG,CAACC,IAAJ,CAASC,OAAb,CAAsB,CAClB,GAAMD,CAAAA,IAAI,CAAGD,GAAG,CAACC,IAAJ,CAASA,IAAtB,CACA,MAAI,CAACE,QAAL,CAAc,CAAEpB,WAAW,CAAEkB,IAAf,CAAd,EACH,CAHD,IAGO,CACHG,KAAK,CAAC,mBAAD,CAAL,CACH,CACJ,CATL,EAUKC,KAVL,CAUW,SAAAC,GAAG,CAAI,CACVF,KAAK,CAAC,eAAiBE,GAAlB,CAAL,CACH,CAZL,EAaH,C,+CAEY,iBACTnC,WAAW,CAAC2B,MAAZ,GACKC,IADL,CACU,SAAAC,GAAG,CAAI,CAET,GAAIA,GAAG,CAACC,IAAJ,CAASC,OAAb,CAAsB,CAClB,GAAMD,CAAAA,IAAI,CAAGD,GAAG,CAACC,IAAJ,CAASA,IAAtB,CACA,MAAI,CAACE,QAAL,CAAc,CAAEnB,KAAK,CAAEiB,IAAT,CAAd,EACH,CAHD,IAGO,CACHG,KAAK,CAAC,mBAAD,CAAL,CACH,CACJ,CATL,EAUKC,KAVL,CAUW,SAAAC,GAAG,CAAI,CACVF,KAAK,CAAC,eAAiBE,GAAlB,CAAL,CACH,CAZL,EAaH,C,iDAEa,iBACVpC,YAAY,CAAC4B,MAAb,GACKC,IADL,CACU,SAAAC,GAAG,CAAI,CAET,GAAIA,GAAG,CAACC,IAAJ,CAASC,OAAb,CAAsB,CAClB,GAAMD,CAAAA,IAAI,CAAGD,GAAG,CAACC,IAAJ,CAASA,IAAtB,CACA,MAAI,CAACE,QAAL,CAAc,CAAElB,MAAM,CAAEgB,IAAV,CAAd,EACH,CAHD,IAGO,CACHG,KAAK,CAAC,mBAAD,CAAL,CACH,CACJ,CATL,EAUKC,KAVL,CAUW,SAAAC,GAAG,CAAI,CACVF,KAAK,CAAC,eAAiBE,GAAlB,CAAL,CACH,CAZL,EAaH,C,uCAEQ,iBACL,mBACI,2BAAK,KAAK,CAAC,eAAX,eACI,8BAAQ,GAAG,CAAC,kEAAZ,EADJ,cAEI,2BAAK,KAAK,CAAC,KAAX,eACI,2BAAK,KAAK,CAAC,UAAX,eACI,2BAAK,KAAK,CAAC,MAAX,eACI,2BAAK,KAAK,CAAC,WAAX,eACI,2BAAK,KAAK,CAAC,aAAX,eACI,6BAAO,IAAI,CAAC,MAAZ,CACI,KAAK,CAAE,KAAKxB,KAAL,CAAWI,IADtB,CAEI,QAAQ,CAAE,kBAACT,KAAD,QAAW,CAAA,MAAI,CAAC0B,QAAL,CAAc,CAAEjB,IAAI,CAAET,KAAK,CAACG,MAAN,CAAaH,KAArB,CAAd,CAAX,EAFd,CAGI,KAAK,CAAC,cAHV,CAGyB,IAAI,CAAC,QAH9B,CAGuC,WAAW,CAAC,QAHnD,CAG4D,SAAS,KAHrE,EADJ,CADJ,cASI,2BAAK,KAAK,CAAC,KAAX,eACI,2BAAK,KAAK,CAAC,UAAX,eACI,2BAAK,KAAK,CAAC,YAAX,eACI,8BAAQ,KAAK,CAAC,cAAd,CACI,QAAQ,CAAE,kBAACA,KAAD,QAAW,CAAA,MAAI,CAAC0B,QAAL,CAAc,CAAEd,YAAY,CAAEZ,KAAK,CAACG,MAAN,CAAaH,KAA7B,CAAd,CAAX,EADd,eAEI,8BAAQ,QAAQ,KAAhB,CAAiB,QAAQ,KAAzB,iBAFJ,CAGK,KAAK8B,eAAL,EAHL,CADJ,CADJ,CADJ,cAYI,2BAAK,KAAK,CAAC,UAAX,eACI,2BAAK,KAAK,CAAC,YAAX,eACI,8BAAQ,KAAK,CAAC,cAAd,CACI,QAAQ,CAAE,kBAAC9B,KAAD,QAAW,CAAA,MAAI,CAAC0B,QAAL,CAAc,CAAEb,MAAM,CAAEb,KAAK,CAACG,MAAN,CAAaH,KAAvB,CAAd,CAAX,EADd,eAEI,8BAAQ,QAAQ,KAAhB,CAAiB,QAAQ,KAAzB,QAFJ,CAGK,KAAK+B,SAAL,EAHL,CADJ,CADJ,CAZJ,cAsBI,2BAAK,KAAK,CAAC,UAAX,eACI,2BAAK,KAAK,CAAC,YAAX,eACI,8BAAQ,KAAK,CAAC,cAAd,CACI,QAAQ,CAAE,kBAAC/B,KAAD,QAAW,CAAA,MAAI,CAAC0B,QAAL,CAAc,CAAEX,OAAO,CAAEf,KAAK,CAACG,MAAN,CAAaH,KAAxB,CAAd,CAAX,EADd,eAEI,8BAAQ,QAAQ,KAAhB,CAAiB,QAAQ,KAAzB,eAFJ,CAGK,KAAKgC,UAAL,EAHL,CADJ,CADJ,CAtBJ,CATJ,cA2CI,2BAAK,KAAK,CAAC,YAAX,eACI,gCAAU,KAAK,CAAC,cAAhB,CACI,QAAQ,CAAE,kBAAChC,KAAD,QAAW,CAAA,MAAI,CAAC0B,QAAL,CAAc,CAAEV,OAAO,CAAEhB,KAAK,CAACG,MAAN,CAAaH,KAAxB,CAAd,CAAX,EADd,CAEI,WAAW,CAAC,wDAFhB,CAGI,IAAI,CAAC,GAHT,EADJ,CA3CJ,cAkDI,2BAAK,KAAK,CAAC,YAAX,eACI,8BAAQ,IAAI,CAAC,QAAb,CAAsB,KAAK,CAAC,iBAA5B,CAA8C,OAAO,CAAE,yBAAM,CAAA,MAAI,CAACiC,eAAL,EAAN,EAAvD,cADJ,CAlDJ,CADJ,CADJ,CADJ,cA4DI,2BAAK,KAAK,CAAC,UAAX,eACI,2BAAK,KAAK,CAAC,MAAX,eACI,2BAAK,KAAK,CAAC,uBAAX,eACI,4BAAM,KAAK,CAAC,SAAZ,eACI,2BAAK,KAAK,CAAC,YAAX,eACI,2BAAK,KAAK,CAAC,MAAX,eACI,2BAAK,GAAG,CAAEC,OAAO,CAAC,+BAAD,CAAjB,CACI,GAAG,CAAE,aAAAC,cAAc,QAAI,CAAA,MAAI,CAACC,gBAAL,CAAwBD,cAA5B,EADvB,CAEI,EAAE,CAAC,MAFP,CAGI,KAAK,CAAC,kEAHV,CAG6E,GAAG,CAAC,QAHjF,EADJ,cAOI,2BAAK,KAAK,CAAE,CAACE,SAAS,CAAC,MAAX,CAAZ,CAAgC,KAAK,CAAC,QAAtC,eACI,2BAAK,KAAK,CAAC,sDAAX,eACI,6BAAO,KAAK,CAAE,CAACC,KAAK,CAAC,MAAP,CAAd,CAA6B,GAAG,CAAE,aAACC,SAAD,QAAe,CAAA,MAAI,CAACC,aAAL,CAAqBD,SAApC,EAAlC,CACI,IAAI,CAAC,MADT,CAEI,EAAE,CAAC,UAFP,CAGI,SAAS,CAAC,mCAHd,CAII,QAAQ,CAAE,kBAACvC,KAAD,CAAW,CAAE,MAAI,CAACyC,OAAL,CAAazC,KAAK,CAACG,MAAnB,EAA4B,CAJvD,EADJ,cAOI,6BAAO,KAAK,CAAC,mBAAb,CAAiC,GAAG,CAAC,YAArC,WAPJ,CADJ,CAPJ,CADJ,CADJ,CADJ,CADJ,CADJ,CA5DJ,CAFJ,CADJ,CAiGH,C,yDAEiB,CACd,MAAO,MAAKE,KAAL,CAAWC,WAAX,CAAuBoC,GAAvB,CAA2B,SAAAlB,IAAI,CAAI,CACtC,GAAIA,IAAJ,CAAU,CACN,mBACI,8BAAQ,KAAK,CAAEA,IAAI,CAACmB,EAApB,EAAyBnB,IAAI,CAACf,IAA9B,CADJ,CAGH,CAJD,IAIO,CACH,mBAAO,+BAAP,CACH,CACJ,CARM,CAAP,CASH,C,6CAEW,CACR,MAAO,MAAKJ,KAAL,CAAWE,KAAX,CAAiBmC,GAAjB,CAAqB,SAAAlB,IAAI,CAAI,CAChC,GAAIA,IAAJ,CAAU,CACN,mBACI,8BAAQ,KAAK,CAAEA,IAAI,CAACmB,EAApB,EAAyBnB,IAAI,CAACf,IAA9B,CADJ,CAGH,CAJD,IAIO,CACH,mBAAO,+BAAP,CACH,CACJ,CARM,CAAP,CASH,C,+CAEY,CACT,MAAO,MAAKJ,KAAL,CAAWG,MAAX,CAAkBkC,GAAlB,CAAsB,SAAAlB,IAAI,CAAI,CACjC,GAAIA,IAAJ,CAAU,CACN,mBACI,8BAAQ,KAAK,CAAEA,IAAI,CAACmB,EAApB,EAAyBnB,IAAI,CAACf,IAA9B,CADJ,CAGH,CAJD,IAIO,CACH,mBAAO,+BAAP,CACH,CACJ,CARM,CAAP,CASH,C,wCAEOmC,K,CAAO,CACX,GAAIA,KAAK,CAACxC,KAAN,EAAewC,KAAK,CAACxC,KAAN,CAAY,CAAZ,CAAnB,CAAmC,CAC/B,GAAIyC,CAAAA,MAAM,CAAG,GAAIC,CAAAA,UAAJ,EAAb,CAEA,GAAMC,CAAAA,OAAO,CAAGH,KAAK,CAACxC,KAAN,CAAY,CAAZ,CAAhB,CAEA,GAAI2C,OAAO,CAACC,IAAR,CAAaC,QAAb,CAAsB,OAAtB,CAAJ,CAAoC,CAChCJ,MAAM,CAACK,MAAP,CAAgB,SAACC,KAAD,QAAWvD,CAAAA,CAAC,CAAC,OAAD,CAAD,CAAWwD,IAAX,CAAgB,KAAhB,CAAuBD,KAAK,CAAChD,MAAN,CAAakD,MAApC,CAAX,EAAhB,CAEAR,MAAM,CAACS,aAAP,CAAqBP,OAArB,EAA+B;AAE/B,KAAK1C,KAAL,CAAWY,KAAX,CAAmB,CACfR,IAAI,CAAEsC,OAAO,CAACtC,IADC,CAEfuC,IAAI,CAAED,OAAO,CAACC,IAFC,CAGfxB,IAAI,CAAEuB,OAHS,CAAnB,CAKH,CAVD,IAUO,CACHpD,IAAI,CAAC4D,IAAL,CAAU,CACNC,QAAQ,CAAE,KADJ,CAENC,IAAI,CAAE,OAFA,CAGNC,KAAK,CAAE,+BAHD,CAINC,iBAAiB,CAAE,KAJb,CAKNC,KAAK,CAAE,IALD,CAAV,EAOH,CAGJ,CACJ,C,uDAEe,CACZ,GAAIC,CAAAA,WAAW,CAAG,EAAlB,CACA,GAAIC,CAAAA,KAAK,CAAG,CAAZ,CACA,GAAMC,CAAAA,MAAM,CAAG,KAAK1D,KAAL,CAAWI,IAA1B,CAEA,GAAGsD,MAAM,CAACC,OAAP,CAAe,KAAf,CAAsB,EAAtB,EAA0BC,MAA1B,EAAkC,CAArC,CAAuC,CACnCJ,WAAW,EAAE,UAAb,CACAC,KAAK,GACR,CACD,GAAG,KAAKzD,KAAL,CAAWO,YAAX,EAAyB,IAA5B,CAAiC,CAC7BiD,WAAW,EAAE,gBAAb,CACAC,KAAK,GACR,CACD,GAAG,KAAKzD,KAAL,CAAWQ,MAAX,EAAmB,IAAtB,CAA2B,CACvBgD,WAAW,EAAE,OAAb,CACAC,KAAK,GACR,CAED;AACA,GAAGA,KAAK,CAAC,CAAT,CAAW,CACPnE,IAAI,CAAC4D,IAAL,CAAU,CACNC,QAAQ,CAAE,QADJ,CAENC,IAAI,CAAE,OAFA,CAGNC,KAAK,CAAE,CAACI,KAAK,EAAE,CAAP,CAAS,gBAAT,CAA0B,qBAA3B,EAAkDD,WAHnD,CAINF,iBAAiB,CAAE,KAJb,CAKNC,KAAK,CAAE,IALD,CAAV,EAOA,MAAO,MAAP,CACH,CATD,IASK,CACD,MAAO,KAAP,CACH,CAEJ,C,yDAEiB,CACd,GAAG,KAAKM,cAAL,IAAuB,KAA1B,CAAgC,CAC5B,OACH,CAED;AACA,GAAMC,CAAAA,QAAQ,CAAG,CACb1D,IAAI,CAAE,KAAKJ,KAAL,CAAWI,IADJ,CAEbG,YAAY,CAAE,KAAKP,KAAL,CAAWO,YAFZ,CAGbC,MAAM,CAAE,KAAKR,KAAL,CAAWQ,MAHN,CAIbC,KAAK,CAAE,KAAKT,KAAL,CAAWS,KAJL,CAKbC,OAAO,CAAE,KAAKV,KAAL,CAAWU,OALP,CAMbC,OAAO,CAAE,KAAKX,KAAL,CAAWW,OANP,CAObC,KAAK,CAAE,KAAKZ,KAAL,CAAWY,KAPL,CAAjB,CASAU,KAAK,CAACyC,IAAI,CAACC,SAAL,CAAeF,QAAf,CAAD,CAAL,CAEA5E,mBAAmB,CAAC+E,MAApB,CAA2BH,QAA3B,EACK7C,IADL,CACU,SAAAC,GAAG,CAAI,CACT,GAAIA,GAAG,CAACC,IAAJ,CAASC,OAAb,CAAsB,CAClB;AACA9B,IAAI,CAAC4D,IAAL,CAAU,CACNC,QAAQ,CAAE,KADJ,CAENC,IAAI,CAAE,SAFA,CAGNC,KAAK,CAAE,oCAHD,CAINC,iBAAiB,CAAE,KAJb,CAKNC,KAAK,CAAE,IALD,CAAV,EAOA;AACH,CAVD,IAWK,CACDjC,KAAK,CAAC,OAAD,CAAL,CACH,CACJ,CAhBL,EAgBOC,KAhBP,CAgBa,SAAA2C,KAAK,CAAI,CACd5C,KAAK,CAAC,YAAc4C,KAAf,CAAL,CACH,CAlBL,EAmBH,C,8BAxT0BjF,KAAK,CAACkF,S,EA6TrC,cAAe3E,CAAAA,gBAAf","sourcesContent":["import React from 'react';\n\nimport '../../node_modules/bootstrap/dist/css/bootstrap.min.css';\nimport '../../node_modules/bootstrap/dist/js/bootstrap.bundle.min';\n\nimport ProfessionalService from '../services/professional.service';\nimport DepartmentService from '../services/department.service';\nimport TutorService from '../services/tutor.service';\nimport RoleService from '../services/role.service';\n\nimport Swal from 'sweetalert2';\nimport $ from 'jquery';\n\nclass profileComponent extends React.Component {\n\n    formatImage = (value) => {\n        console.log(value.target.files[0]);\n    }\n\n    constructor(props) {\n        super(props);\n        this.state = {\n            departments: [],\n            roles: [],\n            tutors: [],\n            name: sessionStorage.getItem(\"userName\"),\n            departmentId: null,\n            roleId: null,\n            email: sessionStorage.getItem(\"userEmail\"),\n            tutorId: null,\n            comment: \"\",\n            image: null\n        };\n    }\n\n    componentDidMount() {\n        this.queryDepartments();\n        this.queryRoles();\n        this.queryTutors();\n    }\n\n    queryDepartments() {\n        DepartmentService.getAll()\n            .then(res => {\n\n                if (res.data.success) {\n                    const data = res.data.data;\n                    this.setState({ departments: data });\n                } else {\n                    alert('Error web service');\n                }\n            })\n            .catch(err => {\n                alert('ERROR server' + err);\n            });\n    }\n\n    queryRoles() {\n        RoleService.getAll()\n            .then(res => {\n\n                if (res.data.success) {\n                    const data = res.data.data;\n                    this.setState({ roles: data });\n                } else {\n                    alert('Error web service');\n                }\n            })\n            .catch(err => {\n                alert('ERROR server' + err);\n            });\n    }\n\n    queryTutors() {\n        TutorService.getAll()\n            .then(res => {\n\n                if (res.data.success) {\n                    const data = res.data.data;\n                    this.setState({ tutors: data });\n                } else {\n                    alert('Error web service');\n                }\n            })\n            .catch(err => {\n                alert('ERROR server' + err);\n            });\n    }\n\n    render() {\n        return (\n            <div class=\"container p-4\">\n                <script src=\"https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js\"></script>\n                <div class=\"row\">\n                    <div class=\"col-lg-9\">\n                        <div class=\"card\">\n                            <div class=\"card-body\">\n                                <div class=\"form-group \">\n                                    <input type=\"text\"\n                                        value={this.state.name}\n                                        onChange={(value) => this.setState({ name: value.target.value })}\n                                        class=\"form-control\" name=\"nombre\" placeholder=\"Nombre\" autofocus\n                                    />\n                                </div>\n\n                                <div class=\"row\">\n                                    <div class=\"col-lg-3\">\n                                        <div class=\"form-group\">\n                                            <select class=\"form-control\"\n                                                onChange={(value) => this.setState({ departmentId: value.target.value })} >\n                                                <option selected disabled>Departamento</option>\n                                                {this.loadDepartments()}\n\n                                            </select>\n                                        </div>\n                                    </div>\n\n                                    <div class=\"col-lg-2\">\n                                        <div class=\"form-group\">\n                                            <select class=\"form-control\"\n                                                onChange={(value) => this.setState({ roleId: value.target.value })} >\n                                                <option selected disabled >Rol</option>\n                                                {this.loadRoles()}\n                                            </select>\n                                        </div>\n                                    </div>\n\n                                    <div class=\"col-lg-3\">\n                                        <div class=\"form-group\">\n                                            <select class=\"form-control\"\n                                                onChange={(value) => this.setState({ tutorId: value.target.value })} >\n                                                <option selected disabled >Tutoría</option>\n                                                {this.loadTutors()}\n                                            </select>\n                                        </div>\n                                    </div>\n\n                                </div>\n\n                                <div class=\"form-group\">\n                                    <textarea class=\"form-control\"\n                                        onChange={(value) => this.setState({ comment: value.target.value })}\n                                        placeholder=\"Introduzca si lo desea algún comentario: Me gusta J\"\n                                        rows=\"3\"></textarea>\n                                </div>\n\n                                <div class=\"form-group\">\n                                    <button type=\"submit\" class=\"btn btn-success\" onClick={() => this.addProfessional()}>Añadir</button>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n\n                    <div class=\"col-lg-3\">\n                        <div class=\"card\">\n                            <div class=\"card-body text-center\">\n                                <form class=\"md-form\">\n                                    <div class=\"file-field\">\n                                        <div class=\"md-4\" >\n                                            <img src={require(\"../images/profile-picture.jpg\")}\n                                                ref={profilePicture => this.myProfilePicture = profilePicture}\n                                                id=\"blah\"\n                                                class=\"rounded-circle z-depth-1-half avatar-pic img-fluid img-thumbnail\" alt=\"avatar\"\n                                            />\n\n                                            <div style={{marginTop:\"10px\"}} class=\"d-flex\" >\n                                                <div class=\"btn btn-mdb-color btn-rounded float-left custom-file\">\n                                                    <input style={{width:\"100%\"}}ref={(myElement) => this.myFileElement = myElement}\n                                                        type=\"file\"\n                                                        id=\"imgInput\"\n                                                        className=\"custom-file-input btn btn-primary\"\n                                                        onChange={(value) => { this.readURL(value.target) }}\n                                                    />\n                                                    <label class=\"custom-file-label\" for=\"customFile\">Perfil</label>\n                                                </div>\n                                            </div>\n                                        </div>\n\n                                    </div>\n                                </form>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n\n        );\n    }\n\n    loadDepartments() {\n        return this.state.departments.map(data => {\n            if (data) {\n                return (\n                    <option value={data.id}>{data.name}</option>\n                );\n            } else {\n                return <div></div>;\n            }\n        });\n    }\n\n    loadRoles() {\n        return this.state.roles.map(data => {\n            if (data) {\n                return (\n                    <option value={data.id}>{data.name}</option>\n                );\n            } else {\n                return <div></div>;\n            }\n        });\n    }\n\n    loadTutors() {\n        return this.state.tutors.map(data => {\n            if (data) {\n                return (\n                    <option value={data.id}>{data.name}</option>\n                );\n            } else {\n                return <div></div>;\n            }\n        });\n    }\n\n    readURL(input) {\n        if (input.files && input.files[0]) {\n            var reader = new FileReader();\n\n            const myValue = input.files[0];\n\n            if (myValue.type.includes(\"image\")) {\n                reader.onload = (event) => $('#blah').attr('src', event.target.result);\n\n                reader.readAsDataURL(myValue); // convert to base64 string\n\n                this.state.image = {\n                    name: myValue.name,\n                    type: myValue.type,\n                    data: myValue\n                }\n            } else {\n                Swal.fire({\n                    position: 'top',\n                    icon: 'error',\n                    title: 'Sólo archivos de tipo imagen!',\n                    showConfirmButton: false,\n                    timer: 2000\n                })\n            }\n\n\n        }\n    }\n\n    validateFields(){\n        let emptyFields = \"\";\n        let count = 0;\n        const nombre = this.state.name;\n        \n        if(nombre.replace(/\\s/g, \"\").length==0){\n            emptyFields+=\" Nombre \";\n            count++;\n        }\n        if(this.state.departmentId==null){\n            emptyFields+=\" Departamento \";\n            count++;\n        }\n        if(this.state.roleId==null){\n            emptyFields+=\" Rol \";\n            count++;\n        }\n\n        //If there are errors\n        if(count>0){\n            Swal.fire({\n                position: 'center',\n                icon: 'error',\n                title: (count==1?\"Falta el campo\":\"Faltan los campos: \")+emptyFields,\n                showConfirmButton: false,\n                timer: 2000\n            })\n            return false;\n        }else{\n            return true;\n        }\n        \n    }\n\n    addProfessional() {\n        if(this.validateFields()==false){\n            return;\n        }\n\n        // parametros de datos post\n        const datapost = {\n            name: this.state.name,\n            departmentId: this.state.departmentId,\n            roleId: this.state.roleId,\n            email: this.state.email,\n            tutorId: this.state.tutorId,\n            comment: this.state.comment,\n            image: this.state.image\n        }\n        alert(JSON.stringify(datapost));\n\n        ProfessionalService.create(datapost)\n            .then(res => {\n                if (res.data.success) {\n                    //alert(res.data.message);\n                    Swal.fire({\n                        position: 'top',\n                        icon: 'success',\n                        title: 'Profesional añadido correctamente!',\n                        showConfirmButton: false,\n                        timer: 2000\n                    })\n                    //this.props.history.push('/list'); \n                }\n                else {\n                    alert(\"Error\");\n                }\n            }).catch(error => {\n                alert(\"Error 34 \" + error);\n            });\n    }\n}\n\n\n\nexport default profileComponent;"]},"metadata":{},"sourceType":"module"}