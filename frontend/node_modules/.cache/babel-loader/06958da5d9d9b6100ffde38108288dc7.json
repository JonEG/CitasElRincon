{"ast":null,"code":"var _jsxFileName = \"/Users/trabajo/Desktop/ELRINCON/react-rincon/src/modules/showDates.js\";\nimport React from 'react';\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport 'bootstrap/dist/js/bootstrap.bundle.min';\nimport { Redirect } from 'react-router-dom';\nimport DateService from '../services/date.service';\nimport ProfessionalService from '../services/professional.service';\nimport DateController from '../controllers/dateController';\nimport DatePicker from 'react-datepicker';\nimport 'react-datepicker/dist/react-datepicker.css';\nimport Nav from '../components/nav';\n\nclass homeComponent extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      redirect: null,\n      dates: [],\n      id: sessionStorage.getItem('userId'),\n      email: sessionStorage.getItem('userEmail'),\n      startDate: new Date(),\n      endDate: new Date(),\n      daysToQuery: []\n    }; // We add addDays to DATE\n\n    Date.prototype.addDays = function (days) {\n      var date = new Date(this.valueOf());\n      date.setDate(date.getDate() + days);\n      return date;\n    };\n  }\n\n  componentDidMount() {\n    this.isUserRegistered();\n    this.showTodayDates();\n  }\n\n  isUserRegistered() {\n    if (sessionStorage.getItem('isUserRegistered') == 'false') {\n      this.setState({\n        redirect: '/crear-perfil'\n      });\n    }\n  }\n\n  async showTodayDates() {\n    const myDates = [];\n    let aux = this.state.daysToQuery;\n\n    if (aux.length == 0) {\n      aux = [DateController.filterDate(new Date())];\n    }\n\n    async function asyncForEach(array, callback) {\n      for (let index = 0; index < array.length; index++) {\n        await callback(array[index], index, array);\n      }\n    }\n\n    await asyncForEach(aux, async each => {\n      await DateService.getDates({\n        id: this.state.id,\n        day: each\n      }).then(res => {\n        if (res.data.success) {\n          const data = res.data.data[0];\n          myDates.push({\n            dates: data\n          });\n        } else {\n          console.error('Error loading dates service');\n        }\n      }).catch(err => {\n        console.error('ERROR server' + err);\n      });\n    });\n    this.setState({\n      dates: myDates\n    });\n  }\n\n  async setStartDate(date) {\n    await this.setState({\n      startDate: date\n    });\n    this.setState({\n      daysToQuery: DateController.getDaysToQuery(this.state.startDate, this.state.endDate)\n    });\n    this.showTodayDates();\n  }\n\n  async setEndDate(date) {\n    await this.setState({\n      endDate: date\n    });\n    this.setState({\n      daysToQuery: DateController.getDaysToQuery(this.state.startDate, this.state.endDate)\n    });\n    this.showTodayDates();\n  }\n\n  render() {\n    if (this.state.redirect) {\n      return /*#__PURE__*/React.createElement(Redirect, {\n        to: this.state.redirect,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 94,\n          columnNumber: 14\n        }\n      });\n    }\n\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(Nav, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 12\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"container p-4\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row float-right\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-sm\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"table\", {\n      className: \"table table-hover table-borderless table-sm\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"tbody\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"tr\", {\n      className: \"table-info\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"strong\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 25\n      }\n    }, \"Desde: \")), /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 105,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(DatePicker, {\n      dateFormat: \"dd/MM/yyyy\",\n      selected: this.state.startDate,\n      onChange: date => this.setStartDate(date),\n      selectsStart: true,\n      startDate: this.state.startDate,\n      endDate: this.state.endDate,\n      minDate: new Date(),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 106,\n        columnNumber: 23\n      }\n    }))), /*#__PURE__*/React.createElement(\"tr\", {\n      className: \"table-info\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 117,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 118,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"strong\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 118,\n        columnNumber: 25\n      }\n    }, \"Hasta: \")), /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 119,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(DatePicker, {\n      dateFormat: \"dd/MM/yyyy\",\n      selected: this.state.endDate,\n      onChange: date => this.setEndDate(date),\n      selectsEnd: true,\n      startDate: this.state.startDate,\n      endDate: this.state.endDate,\n      minDate: this.state.startDate,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 120,\n        columnNumber: 23\n      }\n    }))))))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row my-5 mx-3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 136,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"d-flex justify-content-center\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 137,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"h2\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 138,\n        columnNumber: 15\n      }\n    }, \"Pr\\xF3ximas citas\"))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row my-5 mx-3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 141,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"table\", {\n      className: \"table table-bordered table-striped\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 142,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"thead\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 143,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"tr\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 144,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"th\", {\n      scope: \"col\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 145,\n        columnNumber: 19\n      }\n    }, \"Fecha\"), /*#__PURE__*/React.createElement(\"th\", {\n      scope: \"col\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 146,\n        columnNumber: 19\n      }\n    }, \"Hora\"), /*#__PURE__*/React.createElement(\"th\", {\n      scope: \"col\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 147,\n        columnNumber: 19\n      }\n    }, \"Correo\"), /*#__PURE__*/React.createElement(\"th\", {\n      scope: \"col\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 148,\n        columnNumber: 19\n      }\n    }, \"Tipo\"))), /*#__PURE__*/React.createElement(\"tbody\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 151,\n        columnNumber: 15\n      }\n    }, this.loadFillData())))));\n  }\n\n  loadFillData() {\n    return this.state.dates.map(each => {\n      if (each.dates) {\n        return /*#__PURE__*/React.createElement(\"tr\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 165,\n            columnNumber: 11\n          }\n        }, /*#__PURE__*/React.createElement(\"td\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 166,\n            columnNumber: 13\n          }\n        }, each.dates.date), /*#__PURE__*/React.createElement(\"td\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 167,\n            columnNumber: 13\n          }\n        }, each.dates.time), /*#__PURE__*/React.createElement(\"td\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 168,\n            columnNumber: 13\n          }\n        }, each.dates.email), /*#__PURE__*/React.createElement(\"td\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 169,\n            columnNumber: 13\n          }\n        }, each.dates.dateType.name));\n      }\n    });\n  }\n\n}\n\nexport default homeComponent;","map":{"version":3,"sources":["/Users/trabajo/Desktop/ELRINCON/react-rincon/src/modules/showDates.js"],"names":["React","Redirect","DateService","ProfessionalService","DateController","DatePicker","Nav","homeComponent","Component","constructor","props","state","redirect","dates","id","sessionStorage","getItem","email","startDate","Date","endDate","daysToQuery","prototype","addDays","days","date","valueOf","setDate","getDate","componentDidMount","isUserRegistered","showTodayDates","setState","myDates","aux","length","filterDate","asyncForEach","array","callback","index","each","getDates","day","then","res","data","success","push","console","error","catch","err","setStartDate","getDaysToQuery","setEndDate","render","loadFillData","map","time","dateType","name"],"mappings":"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","sourcesContent":["import React from 'react';\n\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport 'bootstrap/dist/js/bootstrap.bundle.min';\n\nimport { Redirect } from 'react-router-dom';\n\nimport DateService from '../services/date.service';\nimport ProfessionalService from '../services/professional.service';\nimport DateController from '../controllers/dateController';\n\nimport DatePicker from 'react-datepicker';\nimport 'react-datepicker/dist/react-datepicker.css';\nimport Nav from '../components/nav';\n\nclass homeComponent extends React.Component {\n  constructor (props) {\n    super(props);\n    this.state = {\n      redirect: null,\n      dates: [],\n      id: sessionStorage.getItem('userId'),\n      email: sessionStorage.getItem('userEmail'),\n      startDate: new Date(),\n      endDate: new Date(),\n      daysToQuery: []\n    };\n\n    // We add addDays to DATE\n    Date.prototype.addDays = function (days) {\n      var date = new Date(this.valueOf());\n      date.setDate(date.getDate() + days);\n      return date;\n    };\n  }\n\n  componentDidMount () {\n    this.isUserRegistered();\n    this.showTodayDates();\n  }\n\n  isUserRegistered () {\n    if (sessionStorage.getItem('isUserRegistered') == 'false') {\n      this.setState({ redirect: '/crear-perfil' });\n    }\n  }\n\n  async showTodayDates () {\n    const myDates = [];\n\n    let aux = this.state.daysToQuery;\n    if (aux.length == 0) {\n      aux = [DateController.filterDate(new Date())];\n    }\n\n    async function asyncForEach (array, callback) {\n      for (let index = 0; index < array.length; index++) {\n        await callback(array[index], index, array);\n      }\n    }\n\n    await asyncForEach(aux, async (each) => {\n      await DateService.getDates({ id: this.state.id, day: each })\n        .then(res => {\n          if (res.data.success) {\n            const data = res.data.data[0];\n            myDates.push({ dates: data });\n          } else {\n            console.error('Error loading dates service');\n          }\n        })\n        .catch(err => {\n          console.error('ERROR server' + err);\n        });\n    });\n\n    this.setState({ dates: myDates });\n  }\n\n  async setStartDate (date) {\n    await this.setState({ startDate: date });\n    this.setState({ daysToQuery: DateController.getDaysToQuery(this.state.startDate,this.state.endDate) });\n    this.showTodayDates();\n  }\n\n  async setEndDate (date) {\n    await this.setState({ endDate: date });\n    this.setState({ daysToQuery: DateController.getDaysToQuery(this.state.startDate,this.state.endDate) });\n    this.showTodayDates();\n  }\n\n  render () {\n    if (this.state.redirect) {\n      return <Redirect to={this.state.redirect} />;\n    }\n    return (\n      <div><Nav />\n        <div className='container p-4'>\n          <div className='row float-right'>\n            <div className='col-sm'>\n              <table className='table table-hover table-borderless table-sm'>\n                <tbody>\n                  <tr className='table-info'>\n                    <td><strong>Desde: </strong></td>\n                    <td>\n                      <DatePicker\n                        dateFormat='dd/MM/yyyy'\n                        selected={this.state.startDate}\n                        onChange={date => this.setStartDate(date)}\n                        selectsStart\n                        startDate={this.state.startDate}\n                        endDate={this.state.endDate}\n                        minDate={new Date()}\n                      />\n                    </td>\n                  </tr>\n                  <tr className='table-info'>\n                    <td><strong>Hasta: </strong></td>\n                    <td>\n                      <DatePicker\n                        dateFormat='dd/MM/yyyy'\n                        selected={this.state.endDate}\n                        onChange={date => this.setEndDate(date)}\n                        selectsEnd\n                        startDate={this.state.startDate}\n                        endDate={this.state.endDate}\n                        minDate={this.state.startDate}\n                      />\n                    </td>\n                  </tr>\n                </tbody>\n              </table>\n            </div>\n          </div>\n\n          <div className='row my-5 mx-3'>\n            <div className='d-flex justify-content-center'>\n              <h2>Próximas citas</h2>\n            </div>\n          </div>\n          <div className='row my-5 mx-3'>\n            <table className='table table-bordered table-striped'>\n              <thead>\n                <tr>\n                  <th scope='col'>Fecha</th>\n                  <th scope='col'>Hora</th>\n                  <th scope='col'>Correo</th>\n                  <th scope='col'>Tipo</th>\n                </tr>\n              </thead>\n              <tbody>\n                {this.loadFillData()}\n              </tbody>\n            </table>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  loadFillData () {\n    return this.state.dates.map(each => {\n      if (each.dates) {\n        return (\n          <tr>\n            <td>{each.dates.date}</td>\n            <td>{each.dates.time}</td>\n            <td>{each.dates.email}</td>\n            <td>{each.dates.dateType.name}</td>\n          </tr>\n        );\n      }\n    });\n  }\n}\n\nexport default homeComponent;\n"]},"metadata":{},"sourceType":"module"}