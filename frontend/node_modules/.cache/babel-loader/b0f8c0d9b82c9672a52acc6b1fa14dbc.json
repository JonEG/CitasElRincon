{"ast":null,"code":"var _jsxFileName = \"/Users/trabajo/Desktop/ELRINCON/react-rincon/src/modules/editProfile.js\";\nimport React from 'react';\nimport '../../node_modules/bootstrap/dist/css/bootstrap.min.css';\nimport '../../node_modules/bootstrap/dist/js/bootstrap.bundle.min';\nimport { Redirect } from 'react-router-dom';\nimport ProfessionalService from '../services/professional.service';\nimport ProfileController from '../controllers/profileController';\nimport Swal from 'sweetalert2';\nimport $ from 'jquery';\nimport Nav from '../components/nav';\n\nclass profileComponent extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      redirect: null,\n      departments: [],\n      roles: [],\n      tutors: [],\n      id: null,\n      name: null,\n      departmentId: null,\n      roleId: null,\n      email: sessionStorage.getItem('userEmail'),\n      tutorId: null,\n      comment: '',\n      image: {},\n      imageId: null\n    };\n    this.myElement = React.createRef();\n    this.onClickFileInput = this.onClickFileInput.bind(this);\n  }\n\n  onClickFileInput() {\n    // Nota: Estamos accediendo la propiedad \"current\" para obtener el nodo del DOM\n    console.log(this.myElement.current);\n  }\n\n  async componentDidMount() {\n    this.isUserRegistered(); // Dropdowns\n\n    ProfileController.loadDepartments().then(each => this.setState({\n      departments: each\n    }));\n    ProfileController.loadRoles().then(each => this.setState({\n      roles: each\n    }));\n    ProfileController.loadTutors().then(each => this.setState({\n      tutors: each\n    })); // Professional info\n\n    await ProfileController.queryProfessionals().then(dbState => this.loadState(dbState));\n  }\n\n  loadState(dbState) {\n    if (dbState) {\n      this.setState(dbState);\n\n      if (dbState.image) {\n        $('#blah').attr('src', dbState.image.data);\n      }\n    }\n  }\n\n  isUserRegistered() {\n    if (sessionStorage.getItem('isUserRegistered') == 'false') {\n      this.setState({\n        redirect: '/crear-perfil'\n      });\n    }\n  }\n\n  render() {\n    if (this.state.redirect) {\n      return /*#__PURE__*/React.createElement(Redirect, {\n        to: this.state.redirect,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 66,\n          columnNumber: 14\n        }\n      });\n    }\n\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(Nav, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 12\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      class: \"container p-4\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"script\", {\n      src: \"https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      class: \"row\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      class: \"col-lg-9\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      class: \"card\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      class: \"card-body\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      class: \"form-group \",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      type: \"text\",\n      value: this.state.name,\n      onChange: value => this.setState({\n        name: value.target.value\n      }),\n      class: \"form-control\",\n      name: \"nombre\",\n      placeholder: \"Nombre\",\n      autofocus: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 21\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      class: \"row\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      class: \"col-lg-3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      class: \"form-group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 23\n      }\n    }, /*#__PURE__*/React.createElement(\"select\", {\n      class: \"form-control\",\n      value: this.state.departmentId,\n      onChange: value => this.setState({\n        departmentId: value.target.value\n      }),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"option\", {\n      selected: true,\n      disabled: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 27\n      }\n    }, \"Departamento\"), this.state.departments))), /*#__PURE__*/React.createElement(\"div\", {\n      class: \"col-lg-2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      class: \"form-group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 23\n      }\n    }, /*#__PURE__*/React.createElement(\"select\", {\n      class: \"form-control\",\n      value: this.state.roleId,\n      onChange: value => this.setState({\n        roleId: value.target.value\n      }),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"option\", {\n      selected: true,\n      disabled: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 107,\n        columnNumber: 27\n      }\n    }, \"Rol\"), this.state.roles))), /*#__PURE__*/React.createElement(\"div\", {\n      class: \"col-lg-3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 113,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      class: \"form-group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 114,\n        columnNumber: 23\n      }\n    }, /*#__PURE__*/React.createElement(\"select\", {\n      class: \"form-control\",\n      value: this.state.tutorId,\n      onChange: value => this.setState({\n        tutorId: value.target.value\n      }),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 115,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"option\", {\n      selected: true,\n      disabled: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 120,\n        columnNumber: 27\n      }\n    }, \"Tutor\\xEDa\"), this.state.tutors)))), /*#__PURE__*/React.createElement(\"div\", {\n      class: \"form-group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 128,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(\"textarea\", {\n      class: \"form-control\",\n      value: this.state.comment,\n      onChange: value => this.setState({\n        comment: value.target.value\n      }),\n      placeholder: \"Introduzca si lo desea alg\\xFAn comentario: Me gusta J\",\n      rows: \"3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 129,\n        columnNumber: 21\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      class: \"form-group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 138,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(\"button\", {\n      type: \"submit\",\n      class: \"btn btn-success\",\n      onClick: () => this.updateProfessional(),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 139,\n        columnNumber: 21\n      }\n    }, \"Actualizar\"))))), /*#__PURE__*/React.createElement(\"div\", {\n      class: \"col-lg-3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 145,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      class: \"card\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 146,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      class: \"card-body text-center\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 147,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"form\", {\n      class: \"md-form\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 148,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      class: \"file-field\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 149,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      class: \"md-4\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 150,\n        columnNumber: 23\n      }\n    }, /*#__PURE__*/React.createElement(\"img\", {\n      src: require('../images/profile-picture.jpg'),\n      ref: profilePicture => {\n        this.myProfilePicture = profilePicture;\n      },\n      id: \"blah\",\n      class: \"rounded-circle z-depth-1-half avatar-pic img-fluid img-thumbnail\",\n      alt: \"avatar\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 151,\n        columnNumber: 25\n      }\n    }), /*#__PURE__*/React.createElement(\"figure\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 157,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      style: {\n        display: 'none'\n      },\n      ref: this.myElement,\n      type: \"file\",\n      className: \"custom-file-input\",\n      onChange: value => {\n        this.readURL(value.target);\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 158,\n        columnNumber: 27\n      }\n    }), /*#__PURE__*/React.createElement(\"button\", {\n      style: {\n        display: 'block',\n        width: '100%'\n      },\n      onclick: this.onClickFileInput,\n      class: \"btn-mdb-color btn-rounded my-3 btn btn-primary py-1\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 165,\n        columnNumber: 27\n      }\n    }, \"Subir Foto\"), /*#__PURE__*/React.createElement(\"figcaption\", {\n      class: \"font-italic\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 167,\n        columnNumber: 27\n      }\n    }, /*#__PURE__*/React.createElement(\"small\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 167,\n        columnNumber: 59\n      }\n    }, \"Tama\\xF1o m\\xE1ximo 2MB\"))))))))))));\n  }\n\n  readURL(input) {\n    ProfileController.readURL(input).then(res => {\n      if (res) {\n        this.state.image = res;\n        $('#blah').attr('src', res.data);\n      }\n    });\n  }\n\n  updateProfessional() {\n    // parametros de datos post\n    const datapost = {\n      id: this.state.id,\n      name: this.state.name,\n      departmentId: this.state.departmentId,\n      roleId: this.state.roleId,\n      email: this.state.email,\n      tutorId: this.state.tutorId,\n      comment: this.state.comment,\n      image: this.state.image,\n      imageId: this.state.imageId\n    };\n    ProfileController.updateProfessional(datapost);\n  }\n\n}\n\nexport default profileComponent;","map":{"version":3,"sources":["/Users/trabajo/Desktop/ELRINCON/react-rincon/src/modules/editProfile.js"],"names":["React","Redirect","ProfessionalService","ProfileController","Swal","$","Nav","profileComponent","Component","constructor","props","state","redirect","departments","roles","tutors","id","name","departmentId","roleId","email","sessionStorage","getItem","tutorId","comment","image","imageId","myElement","createRef","onClickFileInput","bind","console","log","current","componentDidMount","isUserRegistered","loadDepartments","then","each","setState","loadRoles","loadTutors","queryProfessionals","dbState","loadState","attr","data","render","value","target","updateProfessional","require","profilePicture","myProfilePicture","display","readURL","width","input","res","datapost"],"mappings":"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","sourcesContent":["import React from 'react';\nimport '../../node_modules/bootstrap/dist/css/bootstrap.min.css';\nimport '../../node_modules/bootstrap/dist/js/bootstrap.bundle.min';\nimport { Redirect } from 'react-router-dom';\nimport ProfessionalService from '../services/professional.service';\nimport ProfileController from '../controllers/profileController';\nimport Swal from 'sweetalert2';\nimport $ from 'jquery';\nimport Nav from '../components/nav';\n\nclass profileComponent extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      redirect: null,\n      departments: [],\n      roles: [],\n      tutors: [],\n      id: null,\n      name: null,\n      departmentId: null,\n      roleId: null,\n      email: sessionStorage.getItem('userEmail'),\n      tutorId: null,\n      comment: '',\n      image: {},\n      imageId: null\n    };\n\n    this.myElement = React.createRef();\n    this.onClickFileInput = this.onClickFileInput.bind(this);\n  }\n\n  onClickFileInput() {\n    // Nota: Estamos accediendo la propiedad \"current\" para obtener el nodo del DOM\n    console.log(this.myElement.current);\n  }\n\n  async componentDidMount() {\n    this.isUserRegistered();\n    // Dropdowns\n    ProfileController.loadDepartments().then(each => this.setState({ departments: each }));\n    ProfileController.loadRoles().then(each => this.setState({ roles: each }));\n    ProfileController.loadTutors().then(each => this.setState({ tutors: each }));\n    // Professional info\n    await ProfileController.queryProfessionals().then((dbState) => this.loadState(dbState));\n  }\n\n  loadState(dbState) {\n    if (dbState) {\n      this.setState(dbState);\n      if (dbState.image) {\n        $('#blah').attr('src', dbState.image.data);\n      }\n    }\n  }\n\n  isUserRegistered() {\n    if (sessionStorage.getItem('isUserRegistered') == 'false') {\n      this.setState({ redirect: '/crear-perfil' });\n    }\n  }\n\n  render() {\n    if (this.state.redirect) {\n      return <Redirect to={this.state.redirect} />;\n    }\n    return (\n      <div><Nav />\n        <div class='container p-4'>\n          <script src='https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js' />\n          <div class='row'>\n            <div class='col-lg-9'>\n              <div class='card'>\n                <div class='card-body'>\n                  <div class='form-group '>\n                    <input\n                      type='text'\n                      value={this.state.name}\n                      onChange={(value) => this.setState({ name: value.target.value })}\n                      class='form-control' name='nombre' placeholder='Nombre' autofocus\n                    />\n                  </div>\n\n                  <div class='row'>\n                    <div class='col-lg-3'>\n                      <div class='form-group'>\n                        <select\n                          class='form-control'\n                          value={this.state.departmentId}\n                          onChange={(value) => this.setState({ departmentId: value.target.value })}\n                        >\n                          <option selected disabled>Departamento</option>\n                          {this.state.departments}\n\n                        </select>\n                      </div>\n                    </div>\n\n                    <div class='col-lg-2'>\n                      <div class='form-group'>\n                        <select\n                          class='form-control'\n                          value={this.state.roleId}\n                          onChange={(value) => this.setState({ roleId: value.target.value })}\n                        >\n                          <option selected disabled>Rol</option>\n                          {this.state.roles}\n                        </select>\n                      </div>\n                    </div>\n\n                    <div class='col-lg-3'>\n                      <div class='form-group'>\n                        <select\n                          class='form-control'\n                          value={this.state.tutorId}\n                          onChange={(value) => this.setState({ tutorId: value.target.value })}\n                        >\n                          <option selected disabled>Tutoría</option>\n                          {this.state.tutors}\n                        </select>\n                      </div>\n                    </div>\n\n                  </div>\n\n                  <div class='form-group'>\n                    <textarea\n                      class='form-control'\n                      value={this.state.comment}\n                      onChange={(value) => this.setState({ comment: value.target.value })}\n                      placeholder='Introduzca si lo desea algún comentario: Me gusta J'\n                      rows='3'\n                    />\n                  </div>\n\n                  <div class='form-group'>\n                    <button type='submit' class='btn btn-success' onClick={() => this.updateProfessional()}>Actualizar</button>\n                  </div>\n                </div>\n              </div>\n            </div>\n\n            <div class='col-lg-3'>\n              <div class='card'>\n                <div class='card-body text-center'>\n                  <form class='md-form'>\n                    <div class='file-field'>\n                      <div class='md-4'>\n                        <img\n                          src={require('../images/profile-picture.jpg')}\n                          ref={profilePicture => { this.myProfilePicture = profilePicture; }}\n                          id='blah'\n                          class='rounded-circle z-depth-1-half avatar-pic img-fluid img-thumbnail' alt='avatar'\n                        />\n                        <figure>\n                          <input\n                            style={{ display: 'none' }}\n                            ref={this.myElement}\n                            type='file'\n                            className='custom-file-input'\n                            onChange={(value) => { this.readURL(value.target); }}\n                          />\n                          <button style={{ display: 'block', width: '100%' }} onclick={this.onClickFileInput}\n                            class='btn-mdb-color btn-rounded my-3 btn btn-primary py-1' >Subir Foto</button>\n                          <figcaption class=\"font-italic\"><small>Tamaño máximo 2MB</small></figcaption>\n                        </figure>\n                      </div>\n                    </div>\n                  </form>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  readURL(input) {\n    ProfileController.readURL(input).then((res) => {\n      if (res) {\n        this.state.image = res;\n        $('#blah').attr('src', res.data);\n      }\n    });\n  }\n\n  updateProfessional() {\n    // parametros de datos post\n    const datapost = {\n      id: this.state.id,\n      name: this.state.name,\n      departmentId: this.state.departmentId,\n      roleId: this.state.roleId,\n      email: this.state.email,\n      tutorId: this.state.tutorId,\n      comment: this.state.comment,\n      image: this.state.image,\n      imageId: this.state.imageId\n    };\n\n    ProfileController.updateProfessional(datapost);\n  }\n}\n\nexport default profileComponent;\n"]},"metadata":{},"sourceType":"module"}