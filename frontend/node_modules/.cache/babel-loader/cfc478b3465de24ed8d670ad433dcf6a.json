{"ast":null,"code":"var _jsxFileName = \"/Users/trabajo/Desktop/ELRINCON/react-rincon/src/modules/editProfile.js\";\nimport React from 'react';\nimport '../../node_modules/bootstrap/dist/css/bootstrap.min.css';\nimport '../../node_modules/bootstrap/dist/js/bootstrap.bundle.min';\nimport { Redirect } from 'react-router-dom';\nimport ProfessionalService from '../services/professional.service';\nimport ProfileController from '../controllers/profileController';\nimport Swal from 'sweetalert2';\nimport $ from 'jquery';\nimport Nav from '../components/nav';\n\nclass profileComponent extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      redirect: null,\n      departments: [],\n      roles: [],\n      tutors: [],\n      id: null,\n      name: null,\n      departmentId: null,\n      roleId: null,\n      email: sessionStorage.getItem('userEmail'),\n      tutorId: null,\n      comment: '',\n      image: {},\n      imageId: null\n    };\n  }\n\n  async componentDidMount() {\n    this.isUserRegistered(); // Dropdowns\n\n    ProfileController.loadDepartments().then(each => this.setState({\n      departments: each\n    }));\n    ProfileController.loadRoles().then(each => this.setState({\n      roles: each\n    }));\n    ProfileController.loadTutors().then(each => this.setState({\n      tutors: each\n    })); // Professional info\n\n    await ProfileController.queryProfessionals().then(dbState => this.loadState(dbState));\n  }\n\n  loadState(dbState) {\n    if (dbState) {\n      this.setState(dbState);\n\n      if (dbState.image) {\n        $('#blah').attr('src', dbState.image.data);\n      }\n    }\n  }\n\n  isUserRegistered() {\n    if (sessionStorage.getItem('isUserRegistered') == 'false') {\n      this.setState({\n        redirect: '/crear-perfil'\n      });\n    }\n  }\n\n  render() {\n    if (this.state.redirect) {\n      return /*#__PURE__*/React.createElement(Redirect, {\n        to: this.state.redirect,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 58,\n          columnNumber: 14\n        }\n      });\n    }\n\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(Nav, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 12\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      class: \"container p-4\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"script\", {\n      src: \"https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      class: \"row\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      class: \"col-lg-9\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      class: \"card\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      class: \"card-body\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      class: \"form-group \",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      type: \"text\",\n      value: this.state.name,\n      onChange: value => this.setState({\n        name: value.target.value\n      }),\n      class: \"form-control\",\n      name: \"nombre\",\n      placeholder: \"Nombre\",\n      autofocus: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 21\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      class: \"row\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      class: \"col-lg-3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      class: \"form-group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 23\n      }\n    }, /*#__PURE__*/React.createElement(\"select\", {\n      class: \"form-control\",\n      value: this.state.departmentId,\n      onChange: value => this.setState({\n        departmentId: value.target.value\n      }),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"option\", {\n      selected: true,\n      disabled: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 27\n      }\n    }, \"Departamento\"), this.state.departments))), /*#__PURE__*/React.createElement(\"div\", {\n      class: \"col-lg-2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      class: \"form-group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 23\n      }\n    }, /*#__PURE__*/React.createElement(\"select\", {\n      class: \"form-control\",\n      value: this.state.roleId,\n      onChange: value => this.setState({\n        roleId: value.target.value\n      }),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"option\", {\n      selected: true,\n      disabled: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 27\n      }\n    }, \"Rol\"), this.state.roles))), /*#__PURE__*/React.createElement(\"div\", {\n      class: \"col-lg-3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 105,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      class: \"form-group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 106,\n        columnNumber: 23\n      }\n    }, /*#__PURE__*/React.createElement(\"select\", {\n      class: \"form-control\",\n      value: this.state.tutorId,\n      onChange: value => this.setState({\n        tutorId: value.target.value\n      }),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 107,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"option\", {\n      selected: true,\n      disabled: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 112,\n        columnNumber: 27\n      }\n    }, \"Tutor\\xEDa\"), this.state.tutors)))), /*#__PURE__*/React.createElement(\"div\", {\n      class: \"form-group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 120,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(\"textarea\", {\n      class: \"form-control\",\n      value: this.state.comment,\n      onChange: value => this.setState({\n        comment: value.target.value\n      }),\n      placeholder: \"Introduzca si lo desea alg\\xFAn comentario: Me gusta J\",\n      rows: \"3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 121,\n        columnNumber: 21\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      class: \"form-group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 130,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(\"button\", {\n      type: \"submit\",\n      class: \"btn btn-success\",\n      onClick: () => this.updateProfessional(),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 131,\n        columnNumber: 21\n      }\n    }, \"Actualizar\"))))), /*#__PURE__*/React.createElement(\"div\", {\n      class: \"col-lg-3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 137,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      class: \"card\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 138,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      class: \"card-body text-center\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 139,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"form\", {\n      class: \"md-form\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 140,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      class: \"file-field\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 141,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      class: \"md-4\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 142,\n        columnNumber: 23\n      }\n    }, /*#__PURE__*/React.createElement(\"img\", {\n      src: require('../images/profile-picture.jpg'),\n      ref: profilePicture => {\n        this.myProfilePicture = profilePicture;\n      },\n      id: \"blah\",\n      class: \"rounded-circle z-depth-1-half avatar-pic img-fluid img-thumbnail\",\n      alt: \"avatar\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 143,\n        columnNumber: 25\n      }\n    }), /*#__PURE__*/React.createElement(\"figure\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 149,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"button\", {\n      style: {\n        display: 'block',\n        width: '100%',\n        height: '30px'\n      },\n      onclick: \"document.getElementById('imgInput').click()\",\n      class: \"btn btn-mdb-color btn-rounded float-left custom-file btn btn-primary\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 150,\n        columnNumber: 29\n      }\n    }, \"Subir Foto\"), /*#__PURE__*/React.createElement(\"div\", {\n      style: {\n        marginTop: '10px'\n      },\n      class: \"d-flex\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 152,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      style: {\n        display: 'none'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 153,\n        columnNumber: 31\n      }\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      style: {\n        width: '100%'\n      },\n      ref: myElement => {\n        this.myFileElement = myElement;\n      },\n      type: \"file\",\n      id: \"imgInput\",\n      className: \"custom-file-input\",\n      onChange: value => {\n        this.readURL(value.target);\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 154,\n        columnNumber: 33\n      }\n    }), /*#__PURE__*/React.createElement(\"label\", {\n      class: \"custom-file-label\",\n      for: \"customFile\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 161,\n        columnNumber: 33\n      }\n    }, \"Perfil\"))), /*#__PURE__*/React.createElement(\"figcaption\", {\n      class: \"font-italic\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 164,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(\"small\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 164,\n        columnNumber: 61\n      }\n    }, \"Tama\\xF1o m\\xE1ximo 2MB\"))))))))))));\n  }\n\n  readURL(input) {\n    ProfileController.readURL(input).then(res => {\n      if (res) {\n        this.state.image = res;\n        $('#blah').attr('src', res.data);\n      }\n    });\n  }\n\n  updateProfessional() {\n    // parametros de datos post\n    const datapost = {\n      id: this.state.id,\n      name: this.state.name,\n      departmentId: this.state.departmentId,\n      roleId: this.state.roleId,\n      email: this.state.email,\n      tutorId: this.state.tutorId,\n      comment: this.state.comment,\n      image: this.state.image,\n      imageId: this.state.imageId\n    };\n    ProfileController.updateProfessional(datapost);\n  }\n\n}\n\nexport default profileComponent;","map":{"version":3,"sources":["/Users/trabajo/Desktop/ELRINCON/react-rincon/src/modules/editProfile.js"],"names":["React","Redirect","ProfessionalService","ProfileController","Swal","$","Nav","profileComponent","Component","constructor","props","state","redirect","departments","roles","tutors","id","name","departmentId","roleId","email","sessionStorage","getItem","tutorId","comment","image","imageId","componentDidMount","isUserRegistered","loadDepartments","then","each","setState","loadRoles","loadTutors","queryProfessionals","dbState","loadState","attr","data","render","value","target","updateProfessional","require","profilePicture","myProfilePicture","display","width","height","marginTop","myElement","myFileElement","readURL","input","res","datapost"],"mappings":"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","sourcesContent":["import React from 'react';\nimport '../../node_modules/bootstrap/dist/css/bootstrap.min.css';\nimport '../../node_modules/bootstrap/dist/js/bootstrap.bundle.min';\nimport { Redirect } from 'react-router-dom';\nimport ProfessionalService from '../services/professional.service';\nimport ProfileController from '../controllers/profileController';\nimport Swal from 'sweetalert2';\nimport $ from 'jquery';\nimport Nav from '../components/nav';\n\nclass profileComponent extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      redirect: null,\n      departments: [],\n      roles: [],\n      tutors: [],\n      id: null,\n      name: null,\n      departmentId: null,\n      roleId: null,\n      email: sessionStorage.getItem('userEmail'),\n      tutorId: null,\n      comment: '',\n      image: {},\n      imageId: null\n    };\n  }\n\n  async componentDidMount() {\n    this.isUserRegistered();\n    // Dropdowns\n    ProfileController.loadDepartments().then(each => this.setState({ departments: each }));\n    ProfileController.loadRoles().then(each => this.setState({ roles: each }));\n    ProfileController.loadTutors().then(each => this.setState({ tutors: each }));\n    // Professional info\n    await ProfileController.queryProfessionals().then((dbState) => this.loadState(dbState));\n  }\n\n  loadState(dbState) {\n    if (dbState) {\n      this.setState(dbState);\n      if (dbState.image) {\n        $('#blah').attr('src', dbState.image.data);\n      }\n    }\n  }\n\n  isUserRegistered() {\n    if (sessionStorage.getItem('isUserRegistered') == 'false') {\n      this.setState({ redirect: '/crear-perfil' });\n    }\n  }\n\n  render() {\n    if (this.state.redirect) {\n      return <Redirect to={this.state.redirect} />;\n    }\n    return (\n      <div><Nav />\n        <div class='container p-4'>\n          <script src='https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js' />\n          <div class='row'>\n            <div class='col-lg-9'>\n              <div class='card'>\n                <div class='card-body'>\n                  <div class='form-group '>\n                    <input\n                      type='text'\n                      value={this.state.name}\n                      onChange={(value) => this.setState({ name: value.target.value })}\n                      class='form-control' name='nombre' placeholder='Nombre' autofocus\n                    />\n                  </div>\n\n                  <div class='row'>\n                    <div class='col-lg-3'>\n                      <div class='form-group'>\n                        <select\n                          class='form-control'\n                          value={this.state.departmentId}\n                          onChange={(value) => this.setState({ departmentId: value.target.value })}\n                        >\n                          <option selected disabled>Departamento</option>\n                          {this.state.departments}\n\n                        </select>\n                      </div>\n                    </div>\n\n                    <div class='col-lg-2'>\n                      <div class='form-group'>\n                        <select\n                          class='form-control'\n                          value={this.state.roleId}\n                          onChange={(value) => this.setState({ roleId: value.target.value })}\n                        >\n                          <option selected disabled>Rol</option>\n                          {this.state.roles}\n                        </select>\n                      </div>\n                    </div>\n\n                    <div class='col-lg-3'>\n                      <div class='form-group'>\n                        <select\n                          class='form-control'\n                          value={this.state.tutorId}\n                          onChange={(value) => this.setState({ tutorId: value.target.value })}\n                        >\n                          <option selected disabled>Tutoría</option>\n                          {this.state.tutors}\n                        </select>\n                      </div>\n                    </div>\n\n                  </div>\n\n                  <div class='form-group'>\n                    <textarea\n                      class='form-control'\n                      value={this.state.comment}\n                      onChange={(value) => this.setState({ comment: value.target.value })}\n                      placeholder='Introduzca si lo desea algún comentario: Me gusta J'\n                      rows='3'\n                    />\n                  </div>\n\n                  <div class='form-group'>\n                    <button type='submit' class='btn btn-success' onClick={() => this.updateProfessional()}>Actualizar</button>\n                  </div>\n                </div>\n              </div>\n            </div>\n\n            <div class='col-lg-3'>\n              <div class='card'>\n                <div class='card-body text-center'>\n                  <form class='md-form'>\n                    <div class='file-field'>\n                      <div class='md-4'>\n                        <img\n                          src={require('../images/profile-picture.jpg')}\n                          ref={profilePicture => { this.myProfilePicture = profilePicture; }}\n                          id='blah'\n                          class='rounded-circle z-depth-1-half avatar-pic img-fluid img-thumbnail' alt='avatar'\n                        />\n                        <figure>\n                            <button style={{display:'block',width: '100%', height:'30px'}} onclick=\"document.getElementById('imgInput').click()\"\n                            class='btn btn-mdb-color btn-rounded float-left custom-file btn btn-primary' >Subir Foto</button>\n                            <div style={{marginTop: '10px' }} class='d-flex'>\n                              <div style={{display:'none'}}>\n                                <input\n                                  style={{ width: '100%' }} ref={(myElement) => { this.myFileElement = myElement; }}\n                                  type='file'\n                                  id='imgInput'\n                                  className='custom-file-input'\n                                  onChange={(value) => { this.readURL(value.target); }}\n                                />\n                                <label class='custom-file-label' for='customFile'>Perfil</label>\n                              </div>\n                            </div>\n                            <figcaption class=\"font-italic\"><small>Tamaño máximo 2MB</small></figcaption>\n                          </figure>\n                      </div>\n                    </div>\n                  </form>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  readURL(input) {\n    ProfileController.readURL(input).then((res) => {\n      if (res) {\n        this.state.image = res;\n        $('#blah').attr('src', res.data);\n      }\n    });\n  }\n\n  updateProfessional() {\n    // parametros de datos post\n    const datapost = {\n      id: this.state.id,\n      name: this.state.name,\n      departmentId: this.state.departmentId,\n      roleId: this.state.roleId,\n      email: this.state.email,\n      tutorId: this.state.tutorId,\n      comment: this.state.comment,\n      image: this.state.image,\n      imageId: this.state.imageId\n    };\n\n    ProfileController.updateProfessional(datapost);\n  }\n}\n\nexport default profileComponent;\n"]},"metadata":{},"sourceType":"module"}