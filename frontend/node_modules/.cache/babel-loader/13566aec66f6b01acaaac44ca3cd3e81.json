{"ast":null,"code":"var _jsxFileName = \"/Users/trabajo/Desktop/ELRINCON/react-rincon/src/modules/createProfile.js\";\nimport React from 'react';\nimport '../../node_modules/bootstrap/dist/css/bootstrap.min.css';\nimport '../../node_modules/bootstrap/dist/js/bootstrap.bundle.min';\nimport { Redirect } from 'react-router-dom';\nimport ProfileController from '../controllers/profileController';\nimport Swal from 'sweetalert2';\nimport $, { data } from 'jquery';\nimport Nav from '../components/nav';\n\nclass profileComponent extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      redirect: null,\n      allowCreation: false,\n      departments: [],\n      roles: [],\n      tutors: [],\n      name: sessionStorage.getItem('userName'),\n      departmentId: null,\n      roleId: null,\n      email: sessionStorage.getItem('userEmail'),\n      tutorId: null,\n      comment: '',\n      image: {}\n    }; // CAN'T TOUCH THIS\n\n    this.myElement = React.createRef();\n    this.handleInputElement = this.handleInputElement.bind(this);\n  } // NOR THIS\n\n\n  handleInputElement() {\n    this.myElement.click();\n  }\n\n  componentDidMount() {\n    this.allowUserCreation();\n    ProfileController.loadDepartments().then(each => this.setState({\n      departments: each\n    }));\n    ProfileController.loadRoles().then(each => this.setState({\n      roles: each\n    }));\n    ProfileController.loadTutors().then(each => this.setState({\n      tutors: each\n    }));\n  }\n\n  async allowUserCreation() {\n    const {\n      redirect,\n      allowCreation\n    } = await ProfileController.loadUserId();\n\n    if (redirect) {\n      this.setState({\n        redirect\n      });\n    } else if (allowCreation) {\n      this.setState({\n        allowCreation\n      });\n    }\n  }\n\n  render() {\n    if (this.state.redirect) {\n      return /*#__PURE__*/React.createElement(Redirect, {\n        to: this.state.redirect,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 56,\n          columnNumber: 14\n        }\n      });\n    } else if (this.state.allowCreation) {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 59,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(Nav, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 60,\n          columnNumber: 11\n        }\n      }), /*#__PURE__*/React.createElement(\"div\", {\n        class: \"container p-4\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 61,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"script\", {\n        src: \"https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 62,\n          columnNumber: 13\n        }\n      }), /*#__PURE__*/React.createElement(\"div\", {\n        class: \"row\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 63,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        class: \"col-lg-9\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 64,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        class: \"card\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 65,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        class: \"card-body\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 66,\n          columnNumber: 19\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        class: \"form-group \",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 67,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(\"input\", {\n        type: \"text\",\n        value: this.state.name,\n        onChange: value => this.setState({\n          name: value.target.value\n        }),\n        class: \"form-control\",\n        name: \"nombre\",\n        placeholder: \"Nombre\",\n        autofocus: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 68,\n          columnNumber: 23\n        }\n      })), /*#__PURE__*/React.createElement(\"div\", {\n        class: \"row\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 76,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        class: \"col-lg-3\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 77,\n          columnNumber: 23\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        class: \"form-group\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 78,\n          columnNumber: 25\n        }\n      }, /*#__PURE__*/React.createElement(\"select\", {\n        class: \"form-control\",\n        onChange: value => this.setState({\n          departmentId: value.target.value\n        }),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 79,\n          columnNumber: 27\n        }\n      }, /*#__PURE__*/React.createElement(\"option\", {\n        selected: true,\n        disabled: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 83,\n          columnNumber: 29\n        }\n      }, \"Departamento\"), this.state.departments))), /*#__PURE__*/React.createElement(\"div\", {\n        class: \"col-lg-2\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 89,\n          columnNumber: 23\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        class: \"form-group\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 90,\n          columnNumber: 25\n        }\n      }, /*#__PURE__*/React.createElement(\"select\", {\n        class: \"form-control\",\n        onChange: value => this.setState({\n          roleId: value.target.value\n        }),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 91,\n          columnNumber: 27\n        }\n      }, /*#__PURE__*/React.createElement(\"option\", {\n        selected: true,\n        disabled: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 95,\n          columnNumber: 29\n        }\n      }, \"Rol\"), this.state.roles))), /*#__PURE__*/React.createElement(\"div\", {\n        class: \"col-lg-3\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 101,\n          columnNumber: 23\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        class: \"form-group\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 102,\n          columnNumber: 25\n        }\n      }, /*#__PURE__*/React.createElement(\"select\", {\n        class: \"form-control\",\n        onChange: value => this.setState({\n          tutorId: value.target.value\n        }),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 103,\n          columnNumber: 27\n        }\n      }, /*#__PURE__*/React.createElement(\"option\", {\n        selected: true,\n        disabled: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 107,\n          columnNumber: 29\n        }\n      }, \"Tutor\\xEDa\"), this.state.tutors)))), /*#__PURE__*/React.createElement(\"div\", {\n        class: \"form-group\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 115,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(\"textarea\", {\n        class: \"form-control\",\n        onChange: value => this.setState({\n          comment: value.target.value\n        }),\n        placeholder: \"Introduzca si lo desea alg\\xFAn comentario: Me gusta J\",\n        rows: \"3\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 116,\n          columnNumber: 23\n        }\n      })), /*#__PURE__*/React.createElement(\"div\", {\n        class: \"form-group\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 124,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(\"button\", {\n        type: \"submit\",\n        class: \"btn btn-success\",\n        onClick: () => this.addProfessional(),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 125,\n          columnNumber: 23\n        }\n      }, \"A\\xF1adir\"))))), /*#__PURE__*/React.createElement(\"div\", {\n        class: \"col-lg-3\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 131,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        class: \"card\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 132,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        class: \"card-body text-center\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 133,\n          columnNumber: 19\n        }\n      }, /*#__PURE__*/React.createElement(\"form\", {\n        class: \"md-form\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 134,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        class: \"file-field\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 135,\n          columnNumber: 23\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        class: \"md-4\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 136,\n          columnNumber: 25\n        }\n      }, /*#__PURE__*/React.createElement(\"img\", {\n        src: require('../images/profile-picture.jpg'),\n        ref: profilePicture => {\n          this.myProfilePicture = profilePicture;\n        },\n        id: \"blah\",\n        class: \"rounded-circle z-depth-1-half avatar-pic img-fluid img-thumbnail\",\n        alt: \"avatar\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 137,\n          columnNumber: 27\n        }\n      }), /*#__PURE__*/React.createElement(\"figure\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 144,\n          columnNumber: 27\n        }\n      }, /*#__PURE__*/React.createElement(\"input\", {\n        style: {\n          display: 'none'\n        },\n        ref: myElement => {\n          this.myElement = myElement;\n        },\n        type: \"file\",\n        className: \"custom-file-input\",\n        onChange: value => {\n          this.readURL(value.target);\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 145,\n          columnNumber: 29\n        }\n      }), /*#__PURE__*/React.createElement(\"button\", {\n        type: \"button\",\n        style: {\n          display: 'block',\n          width: '100%'\n        },\n        onClick: this.handleInputElement,\n        class: \"btn-mdb-color btn-rounded my-3 btn btn-primary py-1\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 152,\n          columnNumber: 29\n        }\n      }, \"Subir Foto\"), /*#__PURE__*/React.createElement(\"figcaption\", {\n        class: \"font-italic\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 158,\n          columnNumber: 29\n        }\n      }, /*#__PURE__*/React.createElement(\"small\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 158,\n          columnNumber: 61\n        }\n      }, \"Tama\\xF1o m\\xE1ximo 2MB\"))))))))))));\n    } else {\n      return null;\n    }\n  }\n\n  readURL(input) {\n    ProfileController.readURL(input).then(res => {\n      if (res) {\n        this.state.image = res;\n        $('#blah').attr('src', res.data);\n      }\n    });\n  }\n\n  async addProfessional() {\n    const datapost = {\n      name: this.state.name,\n      departmentId: this.state.departmentId,\n      roleId: this.state.roleId,\n      email: this.state.email,\n      tutorId: this.state.tutorId,\n      comment: this.state.comment,\n      image: this.state.image\n    };\n    const response = await ProfileController.addProfessional(datapost);\n\n    if (response == 'true') {\n      this.setState({\n        redirect: '/'\n      });\n    }\n  }\n\n}\n\nexport default profileComponent;","map":{"version":3,"sources":["/Users/trabajo/Desktop/ELRINCON/react-rincon/src/modules/createProfile.js"],"names":["React","Redirect","ProfileController","Swal","$","data","Nav","profileComponent","Component","constructor","props","state","redirect","allowCreation","departments","roles","tutors","name","sessionStorage","getItem","departmentId","roleId","email","tutorId","comment","image","myElement","createRef","handleInputElement","bind","click","componentDidMount","allowUserCreation","loadDepartments","then","each","setState","loadRoles","loadTutors","loadUserId","render","value","target","addProfessional","require","profilePicture","myProfilePicture","display","readURL","width","input","res","attr","datapost","response"],"mappings":"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","sourcesContent":["import React from 'react';\nimport '../../node_modules/bootstrap/dist/css/bootstrap.min.css';\nimport '../../node_modules/bootstrap/dist/js/bootstrap.bundle.min';\nimport { Redirect } from 'react-router-dom';\nimport ProfileController from '../controllers/profileController';\nimport Swal from 'sweetalert2';\nimport $, { data } from 'jquery';\nimport Nav from '../components/nav';\n\nclass profileComponent extends React.Component {\n  constructor (props) {\n    super(props);\n    this.state = {\n      redirect: null,\n      allowCreation: false,\n      departments: [],\n      roles: [],\n      tutors: [],\n      name: sessionStorage.getItem('userName'),\n      departmentId: null,\n      roleId: null,\n      email: sessionStorage.getItem('userEmail'),\n      tutorId: null,\n      comment: '',\n      image: {}\n    };\n\n    // CAN'T TOUCH THIS\n    this.myElement = React.createRef();\n    this.handleInputElement = this.handleInputElement.bind(this);\n  }\n\n  // NOR THIS\n  handleInputElement () {\n    this.myElement.click();\n  }\n\n  componentDidMount () {\n    this.allowUserCreation();\n    ProfileController.loadDepartments().then(each => this.setState({ departments: each }));\n    ProfileController.loadRoles().then(each => this.setState({ roles: each }));\n    ProfileController.loadTutors().then(each => this.setState({ tutors: each }));\n  }\n\n  async allowUserCreation () {\n    const { redirect, allowCreation } = await ProfileController.loadUserId();\n    if (redirect) {\n      this.setState({ redirect });\n    } else if (allowCreation) {\n      this.setState({ allowCreation });\n    }\n  }\n\n  render () {\n    if (this.state.redirect) {\n      return <Redirect to={this.state.redirect} />;\n    } else if (this.state.allowCreation) {\n      return (\n        <div>\n          <Nav />\n          <div class='container p-4'>\n            <script src='https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js' />\n            <div class='row'>\n              <div class='col-lg-9'>\n                <div class='card'>\n                  <div class='card-body'>\n                    <div class='form-group '>\n                      <input\n                        type='text'\n                        value={this.state.name}\n                        onChange={(value) => this.setState({ name: value.target.value })}\n                        class='form-control' name='nombre' placeholder='Nombre' autofocus\n                      />\n                    </div>\n\n                    <div class='row'>\n                      <div class='col-lg-3'>\n                        <div class='form-group'>\n                          <select\n                            class='form-control'\n                            onChange={(value) => this.setState({ departmentId: value.target.value })}\n                          >\n                            <option selected disabled>Departamento</option>\n                            {this.state.departments}\n                          </select>\n                        </div>\n                      </div>\n\n                      <div class='col-lg-2'>\n                        <div class='form-group'>\n                          <select\n                            class='form-control'\n                            onChange={(value) => this.setState({ roleId: value.target.value })}\n                          >\n                            <option selected disabled>Rol</option>\n                            {this.state.roles}\n                          </select>\n                        </div>\n                      </div>\n\n                      <div class='col-lg-3'>\n                        <div class='form-group'>\n                          <select\n                            class='form-control'\n                            onChange={(value) => this.setState({ tutorId: value.target.value })}\n                          >\n                            <option selected disabled>Tutoría</option>\n                            {this.state.tutors}\n                          </select>\n                        </div>\n                      </div>\n\n                    </div>\n\n                    <div class='form-group'>\n                      <textarea\n                        class='form-control'\n                        onChange={(value) => this.setState({ comment: value.target.value })}\n                        placeholder='Introduzca si lo desea algún comentario: Me gusta J'\n                        rows='3'\n                      />\n                    </div>\n\n                    <div class='form-group'>\n                      <button type='submit' class='btn btn-success' onClick={() => this.addProfessional()}>Añadir</button>\n                    </div>\n                  </div>\n                </div>\n              </div>\n\n              <div class='col-lg-3'>\n                <div class='card'>\n                  <div class='card-body text-center'>\n                    <form class='md-form'>\n                      <div class='file-field'>\n                        <div class='md-4'>\n                          <img\n                            src={require('../images/profile-picture.jpg')}\n                            ref={profilePicture => { this.myProfilePicture = profilePicture; }}\n                            id='blah'\n                            class='rounded-circle z-depth-1-half avatar-pic img-fluid img-thumbnail' alt='avatar'\n                          />\n\n                          <figure>\n                            <input\n                              style={{ display: 'none' }}\n                              ref={myElement => { this.myElement = myElement; }}\n                              type='file'\n                              className='custom-file-input'\n                              onChange={(value) => { this.readURL(value.target); }}\n                            />\n                            <button\n                              type='button' style={{ display: 'block', width: '100%' }}\n                              onClick={this.handleInputElement}\n                              class='btn-mdb-color btn-rounded my-3 btn btn-primary py-1'\n                            >Subir Foto\n                            </button>\n                            <figcaption class='font-italic'><small>Tamaño máximo 2MB</small></figcaption>\n                          </figure>\n                        </div>\n                      </div>\n                    </form>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      );\n    } else {\n      return null;\n    }\n  }\n\n  readURL (input) {\n    ProfileController.readURL(input).then((res) => {\n      if (res) {\n        this.state.image = res;\n        $('#blah').attr('src', res.data);\n      }\n    });\n  }\n\n  async addProfessional () {\n    const datapost = {\n      name: this.state.name,\n      departmentId: this.state.departmentId,\n      roleId: this.state.roleId,\n      email: this.state.email,\n      tutorId: this.state.tutorId,\n      comment: this.state.comment,\n      image: this.state.image\n    };\n\n    const response = await ProfileController.addProfessional(datapost);\n    if (response == 'true') {\n      this.setState({ redirect: '/' });\n    }\n  }\n}\n\nexport default profileComponent;\n"]},"metadata":{},"sourceType":"module"}