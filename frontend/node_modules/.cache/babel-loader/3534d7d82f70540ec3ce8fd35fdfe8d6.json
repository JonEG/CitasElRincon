{"ast":null,"code":"var _jsxFileName = \"/Users/trabajo/Desktop/ELRINCON/react-rincon/src/modules/editProfile.js\";\nimport React from 'react';\nimport '../../node_modules/bootstrap/dist/css/bootstrap.min.css';\nimport '../../node_modules/bootstrap/dist/js/bootstrap.bundle.min';\nimport { Redirect } from 'react-router-dom';\nimport ProfessionalService from '../services/professional.service';\nimport ProfileController from '../controllers/profileController';\nimport Swal from 'sweetalert2';\nimport $ from 'jquery';\nimport Nav from '../components/nav';\n\nclass profileComponent extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      redirect: null,\n      departments: [],\n      roles: [],\n      tutors: [],\n      id: null,\n      name: null,\n      departmentId: null,\n      roleId: null,\n      email: sessionStorage.getItem('userEmail'),\n      tutorId: null,\n      comment: '',\n      image: null,\n      imageId: null\n    };\n  }\n\n  async componentDidMount() {\n    this.isUserRegistered(); // Dropdowns\n\n    ProfileController.loadDepartments().then(each => this.setState({\n      departments: each\n    }));\n    ProfileController.loadRoles().then(each => this.setState({\n      roles: each\n    }));\n    ProfileController.loadTutors().then(each => this.setState({\n      tutors: each\n    })); // Professional info\n\n    await ProfileController.queryProfessionals().then(res => {\n      this.setState(res);\n      this.setearImagenEnHTML();\n    });\n  }\n\n  isUserRegistered() {\n    if (sessionStorage.getItem('isUserRegistered') == 'false') {\n      this.setState({\n        redirect: '/crear-perfil'\n      });\n    }\n  }\n\n  render() {\n    if (this.state.redirect) {\n      return /*#__PURE__*/React.createElement(Redirect, {\n        to: this.state.redirect,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 52,\n          columnNumber: 14\n        }\n      });\n    }\n\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 55,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(Nav, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 55,\n        columnNumber: 12\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      class: \"container p-4\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 56,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"script\", {\n      src: \"https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      class: \"row\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 58,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      class: \"col-lg-9\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      class: \"card\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      class: \"card-body\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      class: \"form-group \",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      type: \"text\",\n      value: this.state.name,\n      onChange: value => this.setState({\n        name: value.target.value\n      }),\n      class: \"form-control\",\n      name: \"nombre\",\n      placeholder: \"Nombre\",\n      autofocus: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 21\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      class: \"row\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      class: \"col-lg-3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      class: \"form-group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 23\n      }\n    }, /*#__PURE__*/React.createElement(\"select\", {\n      class: \"form-control\",\n      value: this.state.departmentId,\n      onChange: value => this.setState({\n        departmentId: value.target.value\n      }),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"option\", {\n      selected: true,\n      disabled: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 27\n      }\n    }, \"Departamento\"), this.state.departments))), /*#__PURE__*/React.createElement(\"div\", {\n      class: \"col-lg-2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      class: \"form-group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 23\n      }\n    }, /*#__PURE__*/React.createElement(\"select\", {\n      class: \"form-control\",\n      value: this.state.roleId,\n      onChange: value => this.setState({\n        roleId: value.target.value\n      }),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"option\", {\n      selected: true,\n      disabled: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 27\n      }\n    }, \"Rol\"), this.state.roles))), /*#__PURE__*/React.createElement(\"div\", {\n      class: \"col-lg-3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      class: \"form-group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 23\n      }\n    }, /*#__PURE__*/React.createElement(\"select\", {\n      class: \"form-control\",\n      value: this.state.tutorId,\n      onChange: value => this.setState({\n        tutorId: value.target.value\n      }),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"option\", {\n      selected: true,\n      disabled: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 106,\n        columnNumber: 27\n      }\n    }, \"Tutor\\xEDa\"), this.state.tutors)))), /*#__PURE__*/React.createElement(\"div\", {\n      class: \"form-group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 114,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(\"textarea\", {\n      class: \"form-control\",\n      value: this.state.comment,\n      onChange: value => this.setState({\n        comment: value.target.value\n      }),\n      placeholder: \"Introduzca si lo desea alg\\xFAn comentario: Me gusta J\",\n      rows: \"3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 115,\n        columnNumber: 21\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      class: \"form-group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 124,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(\"button\", {\n      type: \"submit\",\n      class: \"btn btn-success\",\n      onClick: () => this.updateProfessional(),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 125,\n        columnNumber: 21\n      }\n    }, \"Actualizar\"))))), /*#__PURE__*/React.createElement(\"div\", {\n      class: \"col-lg-3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 131,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      class: \"card\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 132,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      class: \"card-body text-center\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 133,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"form\", {\n      class: \"md-form\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 134,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      class: \"file-field\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 135,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      class: \"md-4\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 136,\n        columnNumber: 23\n      }\n    }, /*#__PURE__*/React.createElement(\"img\", {\n      src: require('../images/profile-picture.jpg'),\n      ref: profilePicture => this.myProfilePicture = profilePicture,\n      id: \"blah\",\n      class: \"rounded-circle z-depth-1-half avatar-pic img-fluid img-thumbnail\",\n      alt: \"avatar\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 137,\n        columnNumber: 25\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      style: {\n        marginTop: '10px'\n      },\n      class: \"d-flex\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 144,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      class: \"btn btn-mdb-color btn-rounded float-left custom-file\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 145,\n        columnNumber: 27\n      }\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      style: {\n        width: '100%'\n      },\n      ref: myElement => this.myFileElement = myElement,\n      type: \"file\",\n      id: \"imgInput\",\n      className: \"custom-file-input btn btn-primary\",\n      onChange: value => {\n        this.readURL(value.target);\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 146,\n        columnNumber: 29\n      }\n    }), /*#__PURE__*/React.createElement(\"label\", {\n      class: \"custom-file-label\",\n      for: \"customFile\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 153,\n        columnNumber: 29\n      }\n    }, \"Perfil\"))))))))))));\n  }\n\n  readURL(input) {\n    ProfileController.readURL(input).then(res => {\n      if (res) {\n        $('#blah').attr('src', res.data);\n      }\n    });\n  }\n\n  setearImagenEnHTML() {\n    if (this.state.image) {\n      // Setear imagen en html\n      $('#blah').attr('src', this.state.image.data);\n    }\n  }\n\n  validateFields() {\n    let emptyFields = '';\n    let count = 0;\n    const nombre = this.state.name;\n\n    if (nombre.replace(/\\s/g, '').length == 0) {\n      emptyFields += ' Nombre ';\n      count++;\n    }\n\n    if (this.state.departmentId == null) {\n      emptyFields += ' Departamento ';\n      count++;\n    }\n\n    if (this.state.roleId == null) {\n      emptyFields += ' Rol ';\n      count++;\n    } // If there are errors\n\n\n    if (count > 0) {\n      Swal.fire({\n        position: 'center',\n        icon: 'error',\n        title: (count == 1 ? 'Falta el campo' : 'Faltan los campos: ') + emptyFields,\n        showConfirmButton: false,\n        timer: 2000\n      });\n      return false;\n    } else {\n      return true;\n    }\n  }\n\n  updateProfessional() {\n    if (this.validateFields() == false) {\n      return;\n    } // parametros de datos post\n\n\n    const datapost = {\n      id: this.state.id,\n      name: this.state.name,\n      departmentId: this.state.departmentId,\n      roleId: this.state.roleId,\n      email: this.state.email,\n      tutorId: this.state.tutorId,\n      comment: this.state.comment,\n      image: this.state.image,\n      imageId: this.state.imageId\n    };\n    ProfessionalService.update(datapost).then(res => {\n      if (res.data.success) {\n        Swal.fire({\n          position: 'top',\n          icon: 'success',\n          title: 'Profesional actualizado correctamente!',\n          showConfirmButton: false,\n          timer: 2000\n        });\n      } else {\n        console.error('Error');\n      }\n    }).catch(error => {\n      console.error('Error 34 ' + error);\n    });\n  }\n\n}\n\nexport default profileComponent;","map":{"version":3,"sources":["/Users/trabajo/Desktop/ELRINCON/react-rincon/src/modules/editProfile.js"],"names":["React","Redirect","ProfessionalService","ProfileController","Swal","$","Nav","profileComponent","Component","constructor","props","state","redirect","departments","roles","tutors","id","name","departmentId","roleId","email","sessionStorage","getItem","tutorId","comment","image","imageId","componentDidMount","isUserRegistered","loadDepartments","then","each","setState","loadRoles","loadTutors","queryProfessionals","res","setearImagenEnHTML","render","value","target","updateProfessional","require","profilePicture","myProfilePicture","marginTop","width","myElement","myFileElement","readURL","input","attr","data","validateFields","emptyFields","count","nombre","replace","length","fire","position","icon","title","showConfirmButton","timer","datapost","update","success","console","error","catch"],"mappings":";AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAO,yDAAP;AACA,OAAO,2DAAP;AACA,SAASC,QAAT,QAAyB,kBAAzB;AACA,OAAOC,mBAAP,MAAgC,kCAAhC;AACA,OAAOC,iBAAP,MAA8B,kCAA9B;AACA,OAAOC,IAAP,MAAiB,aAAjB;AACA,OAAOC,CAAP,MAAc,QAAd;AACA,OAAOC,GAAP,MAAgB,mBAAhB;;AAEA,MAAMC,gBAAN,SAA+BP,KAAK,CAACQ,SAArC,CAA+C;AAC7CC,EAAAA,WAAW,CAAEC,KAAF,EAAS;AAClB,UAAMA,KAAN;AACA,SAAKC,KAAL,GAAa;AACXC,MAAAA,QAAQ,EAAE,IADC;AAEXC,MAAAA,WAAW,EAAE,EAFF;AAGXC,MAAAA,KAAK,EAAE,EAHI;AAIXC,MAAAA,MAAM,EAAE,EAJG;AAKXC,MAAAA,EAAE,EAAE,IALO;AAMXC,MAAAA,IAAI,EAAE,IANK;AAOXC,MAAAA,YAAY,EAAE,IAPH;AAQXC,MAAAA,MAAM,EAAE,IARG;AASXC,MAAAA,KAAK,EAAEC,cAAc,CAACC,OAAf,CAAuB,WAAvB,CATI;AAUXC,MAAAA,OAAO,EAAE,IAVE;AAWXC,MAAAA,OAAO,EAAE,EAXE;AAYXC,MAAAA,KAAK,EAAE,IAZI;AAaXC,MAAAA,OAAO,EAAE;AAbE,KAAb;AAeD;;AAED,QAAMC,iBAAN,GAA2B;AACzB,SAAKC,gBAAL,GADyB,CAEzB;;AACAzB,IAAAA,iBAAiB,CAAC0B,eAAlB,GAAoCC,IAApC,CAAyCC,IAAI,IAAI,KAAKC,QAAL,CAAc;AAAEnB,MAAAA,WAAW,EAAEkB;AAAf,KAAd,CAAjD;AACA5B,IAAAA,iBAAiB,CAAC8B,SAAlB,GAA8BH,IAA9B,CAAmCC,IAAI,IAAI,KAAKC,QAAL,CAAc;AAAElB,MAAAA,KAAK,EAAEiB;AAAT,KAAd,CAA3C;AACA5B,IAAAA,iBAAiB,CAAC+B,UAAlB,GAA+BJ,IAA/B,CAAoCC,IAAI,IAAI,KAAKC,QAAL,CAAc;AAAEjB,MAAAA,MAAM,EAAEgB;AAAV,KAAd,CAA5C,EALyB,CAMzB;;AACA,UAAM5B,iBAAiB,CAACgC,kBAAlB,GAAuCL,IAAvC,CAA6CM,GAAD,IAAS;AACzD,WAAKJ,QAAL,CAAcI,GAAd;AACA,WAAKC,kBAAL;AACD,KAHK,CAAN;AAID;;AAEDT,EAAAA,gBAAgB,GAAI;AAClB,QAAIP,cAAc,CAACC,OAAf,CAAuB,kBAAvB,KAA8C,OAAlD,EAA2D;AACzD,WAAKU,QAAL,CAAc;AAAEpB,QAAAA,QAAQ,EAAE;AAAZ,OAAd;AACD;AACF;;AAED0B,EAAAA,MAAM,GAAI;AACR,QAAI,KAAK3B,KAAL,CAAWC,QAAf,EAAyB;AACvB,0BAAO,oBAAC,QAAD;AAAU,QAAA,EAAE,EAAE,KAAKD,KAAL,CAAWC,QAAzB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAAP;AACD;;AACD,wBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAAK,oBAAC,GAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAAL,eACE;AAAK,MAAA,KAAK,EAAC,eAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAQ,MAAA,GAAG,EAAC,kEAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF,eAEE;AAAK,MAAA,KAAK,EAAC,KAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAK,MAAA,KAAK,EAAC,UAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAK,MAAA,KAAK,EAAC,MAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAK,MAAA,KAAK,EAAC,WAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAK,MAAA,KAAK,EAAC,aAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AACE,MAAA,IAAI,EAAC,MADP;AAEE,MAAA,KAAK,EAAE,KAAKD,KAAL,CAAWM,IAFpB;AAGE,MAAA,QAAQ,EAAGsB,KAAD,IAAW,KAAKP,QAAL,CAAc;AAAEf,QAAAA,IAAI,EAAEsB,KAAK,CAACC,MAAN,CAAaD;AAArB,OAAd,CAHvB;AAIE,MAAA,KAAK,EAAC,cAJR;AAIuB,MAAA,IAAI,EAAC,QAJ5B;AAIqC,MAAA,WAAW,EAAC,QAJjD;AAI0D,MAAA,SAAS,MAJnE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF,CADF,eAUE;AAAK,MAAA,KAAK,EAAC,KAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAK,MAAA,KAAK,EAAC,UAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAK,MAAA,KAAK,EAAC,YAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AACE,MAAA,KAAK,EAAC,cADR;AAEE,MAAA,KAAK,EAAE,KAAK5B,KAAL,CAAWO,YAFpB;AAGE,MAAA,QAAQ,EAAGqB,KAAD,IAAW,KAAKP,QAAL,CAAc;AAAEd,QAAAA,YAAY,EAAEqB,KAAK,CAACC,MAAN,CAAaD;AAA7B,OAAd,CAHvB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAKE;AAAQ,MAAA,QAAQ,MAAhB;AAAiB,MAAA,QAAQ,MAAzB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBALF,EAMG,KAAK5B,KAAL,CAAWE,WANd,CADF,CADF,CADF,eAeE;AAAK,MAAA,KAAK,EAAC,UAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAK,MAAA,KAAK,EAAC,YAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AACE,MAAA,KAAK,EAAC,cADR;AAEE,MAAA,KAAK,EAAE,KAAKF,KAAL,CAAWQ,MAFpB;AAGE,MAAA,QAAQ,EAAGoB,KAAD,IAAW,KAAKP,QAAL,CAAc;AAAEb,QAAAA,MAAM,EAAEoB,KAAK,CAACC,MAAN,CAAaD;AAAvB,OAAd,CAHvB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAKE;AAAQ,MAAA,QAAQ,MAAhB;AAAiB,MAAA,QAAQ,MAAzB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aALF,EAMG,KAAK5B,KAAL,CAAWG,KANd,CADF,CADF,CAfF,eA4BE;AAAK,MAAA,KAAK,EAAC,UAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAK,MAAA,KAAK,EAAC,YAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AACE,MAAA,KAAK,EAAC,cADR;AAEE,MAAA,KAAK,EAAE,KAAKH,KAAL,CAAWY,OAFpB;AAGE,MAAA,QAAQ,EAAGgB,KAAD,IAAW,KAAKP,QAAL,CAAc;AAAET,QAAAA,OAAO,EAAEgB,KAAK,CAACC,MAAN,CAAaD;AAAxB,OAAd,CAHvB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAKE;AAAQ,MAAA,QAAQ,MAAhB;AAAiB,MAAA,QAAQ,MAAzB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBALF,EAMG,KAAK5B,KAAL,CAAWI,MANd,CADF,CADF,CA5BF,CAVF,eAqDE;AAAK,MAAA,KAAK,EAAC,YAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AACE,MAAA,KAAK,EAAC,cADR;AAEE,MAAA,KAAK,EAAE,KAAKJ,KAAL,CAAWa,OAFpB;AAGE,MAAA,QAAQ,EAAGe,KAAD,IAAW,KAAKP,QAAL,CAAc;AAAER,QAAAA,OAAO,EAAEe,KAAK,CAACC,MAAN,CAAaD;AAAxB,OAAd,CAHvB;AAIE,MAAA,WAAW,EAAC,wDAJd;AAKE,MAAA,IAAI,EAAC,GALP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF,CArDF,eA+DE;AAAK,MAAA,KAAK,EAAC,YAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAQ,MAAA,IAAI,EAAC,QAAb;AAAsB,MAAA,KAAK,EAAC,iBAA5B;AAA8C,MAAA,OAAO,EAAE,MAAM,KAAKE,kBAAL,EAA7D;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBADF,CA/DF,CADF,CADF,CADF,eAyEE;AAAK,MAAA,KAAK,EAAC,UAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAK,MAAA,KAAK,EAAC,MAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAK,MAAA,KAAK,EAAC,uBAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAM,MAAA,KAAK,EAAC,SAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAK,MAAA,KAAK,EAAC,YAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAK,MAAA,KAAK,EAAC,MAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AACE,MAAA,GAAG,EAAEC,OAAO,CAAC,+BAAD,CADd;AAEE,MAAA,GAAG,EAAEC,cAAc,IAAI,KAAKC,gBAAL,GAAwBD,cAFjD;AAGE,MAAA,EAAE,EAAC,MAHL;AAIE,MAAA,KAAK,EAAC,kEAJR;AAI2E,MAAA,GAAG,EAAC,QAJ/E;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF,eAQE;AAAK,MAAA,KAAK,EAAE;AAAEE,QAAAA,SAAS,EAAE;AAAb,OAAZ;AAAmC,MAAA,KAAK,EAAC,QAAzC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAK,MAAA,KAAK,EAAC,sDAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AACE,MAAA,KAAK,EAAE;AAAEC,QAAAA,KAAK,EAAE;AAAT,OADT;AAC4B,MAAA,GAAG,EAAGC,SAAD,IAAe,KAAKC,aAAL,GAAqBD,SADrE;AAEE,MAAA,IAAI,EAAC,MAFP;AAGE,MAAA,EAAE,EAAC,UAHL;AAIE,MAAA,SAAS,EAAC,mCAJZ;AAKE,MAAA,QAAQ,EAAGR,KAAD,IAAW;AAAE,aAAKU,OAAL,CAAaV,KAAK,CAACC,MAAnB;AAA6B,OALtD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF,eAQE;AAAO,MAAA,KAAK,EAAC,mBAAb;AAAiC,MAAA,GAAG,EAAC,YAArC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBARF,CADF,CARF,CADF,CADF,CADF,CADF,CADF,CAzEF,CAFF,CADF,CADF;AAiHD;;AAEDS,EAAAA,OAAO,CAAEC,KAAF,EAAS;AACd/C,IAAAA,iBAAiB,CAAC8C,OAAlB,CAA0BC,KAA1B,EAAiCpB,IAAjC,CAAuCM,GAAD,IAAQ;AAC5C,UAAGA,GAAH,EAAO;AACL/B,QAAAA,CAAC,CAAC,OAAD,CAAD,CAAW8C,IAAX,CAAgB,KAAhB,EAAuBf,GAAG,CAACgB,IAA3B;AACD;AACF,KAJD;AAKD;;AAEDf,EAAAA,kBAAkB,GAAI;AACpB,QAAI,KAAK1B,KAAL,CAAWc,KAAf,EAAsB;AACpB;AACApB,MAAAA,CAAC,CAAC,OAAD,CAAD,CAAW8C,IAAX,CAAgB,KAAhB,EAAuB,KAAKxC,KAAL,CAAWc,KAAX,CAAiB2B,IAAxC;AACD;AACF;;AAEDC,EAAAA,cAAc,GAAI;AAChB,QAAIC,WAAW,GAAG,EAAlB;AACA,QAAIC,KAAK,GAAG,CAAZ;AACA,UAAMC,MAAM,GAAG,KAAK7C,KAAL,CAAWM,IAA1B;;AAEA,QAAIuC,MAAM,CAACC,OAAP,CAAe,KAAf,EAAsB,EAAtB,EAA0BC,MAA1B,IAAoC,CAAxC,EAA2C;AACzCJ,MAAAA,WAAW,IAAI,UAAf;AACAC,MAAAA,KAAK;AACN;;AACD,QAAI,KAAK5C,KAAL,CAAWO,YAAX,IAA2B,IAA/B,EAAqC;AACnCoC,MAAAA,WAAW,IAAI,gBAAf;AACAC,MAAAA,KAAK;AACN;;AACD,QAAI,KAAK5C,KAAL,CAAWQ,MAAX,IAAqB,IAAzB,EAA+B;AAC7BmC,MAAAA,WAAW,IAAI,OAAf;AACAC,MAAAA,KAAK;AACN,KAhBe,CAkBhB;;;AACA,QAAIA,KAAK,GAAG,CAAZ,EAAe;AACbnD,MAAAA,IAAI,CAACuD,IAAL,CAAU;AACRC,QAAAA,QAAQ,EAAE,QADF;AAERC,QAAAA,IAAI,EAAE,OAFE;AAGRC,QAAAA,KAAK,EAAE,CAACP,KAAK,IAAI,CAAT,GAAa,gBAAb,GAAgC,qBAAjC,IAA0DD,WAHzD;AAIRS,QAAAA,iBAAiB,EAAE,KAJX;AAKRC,QAAAA,KAAK,EAAE;AALC,OAAV;AAOA,aAAO,KAAP;AACD,KATD,MASO;AACL,aAAO,IAAP;AACD;AACF;;AAEDvB,EAAAA,kBAAkB,GAAI;AACpB,QAAI,KAAKY,cAAL,MAAyB,KAA7B,EAAoC;AAClC;AACD,KAHmB,CAKpB;;;AACA,UAAMY,QAAQ,GAAG;AACfjD,MAAAA,EAAE,EAAE,KAAKL,KAAL,CAAWK,EADA;AAEfC,MAAAA,IAAI,EAAE,KAAKN,KAAL,CAAWM,IAFF;AAGfC,MAAAA,YAAY,EAAE,KAAKP,KAAL,CAAWO,YAHV;AAIfC,MAAAA,MAAM,EAAE,KAAKR,KAAL,CAAWQ,MAJJ;AAKfC,MAAAA,KAAK,EAAE,KAAKT,KAAL,CAAWS,KALH;AAMfG,MAAAA,OAAO,EAAE,KAAKZ,KAAL,CAAWY,OANL;AAOfC,MAAAA,OAAO,EAAE,KAAKb,KAAL,CAAWa,OAPL;AAQfC,MAAAA,KAAK,EAAE,KAAKd,KAAL,CAAWc,KARH;AASfC,MAAAA,OAAO,EAAE,KAAKf,KAAL,CAAWe;AATL,KAAjB;AAYAxB,IAAAA,mBAAmB,CAACgE,MAApB,CAA2BD,QAA3B,EACGnC,IADH,CACQM,GAAG,IAAI;AACX,UAAIA,GAAG,CAACgB,IAAJ,CAASe,OAAb,EAAsB;AACpB/D,QAAAA,IAAI,CAACuD,IAAL,CAAU;AACRC,UAAAA,QAAQ,EAAE,KADF;AAERC,UAAAA,IAAI,EAAE,SAFE;AAGRC,UAAAA,KAAK,EAAE,wCAHC;AAIRC,UAAAA,iBAAiB,EAAE,KAJX;AAKRC,UAAAA,KAAK,EAAE;AALC,SAAV;AAOD,OARD,MAQO;AACLI,QAAAA,OAAO,CAACC,KAAR,CAAc,OAAd;AACD;AACF,KAbH,EAaKC,KAbL,CAaWD,KAAK,IAAI;AAChBD,MAAAA,OAAO,CAACC,KAAR,CAAc,cAAcA,KAA5B;AACD,KAfH;AAgBD;;AAhP4C;;AAmP/C,eAAe9D,gBAAf","sourcesContent":["import React from 'react';\nimport '../../node_modules/bootstrap/dist/css/bootstrap.min.css';\nimport '../../node_modules/bootstrap/dist/js/bootstrap.bundle.min';\nimport { Redirect } from 'react-router-dom';\nimport ProfessionalService from '../services/professional.service';\nimport ProfileController from '../controllers/profileController';\nimport Swal from 'sweetalert2';\nimport $ from 'jquery';\nimport Nav from '../components/nav';\n\nclass profileComponent extends React.Component {\n  constructor (props) {\n    super(props);\n    this.state = {\n      redirect: null,\n      departments: [],\n      roles: [],\n      tutors: [],\n      id: null,\n      name: null,\n      departmentId: null,\n      roleId: null,\n      email: sessionStorage.getItem('userEmail'),\n      tutorId: null,\n      comment: '',\n      image: null,\n      imageId: null\n    };\n  }\n\n  async componentDidMount () {\n    this.isUserRegistered();\n    // Dropdowns\n    ProfileController.loadDepartments().then(each => this.setState({ departments: each }));\n    ProfileController.loadRoles().then(each => this.setState({ roles: each }));\n    ProfileController.loadTutors().then(each => this.setState({ tutors: each }));\n    // Professional info\n    await ProfileController.queryProfessionals().then((res) => {\n      this.setState(res);\n      this.setearImagenEnHTML();\n    });\n  }\n\n  isUserRegistered () {\n    if (sessionStorage.getItem('isUserRegistered') == 'false') {\n      this.setState({ redirect: '/crear-perfil' });\n    }\n  }\n\n  render () {\n    if (this.state.redirect) {\n      return <Redirect to={this.state.redirect} />;\n    }\n    return (\n      <div><Nav />\n        <div class='container p-4'>\n          <script src='https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js' />\n          <div class='row'>\n            <div class='col-lg-9'>\n              <div class='card'>\n                <div class='card-body'>\n                  <div class='form-group '>\n                    <input\n                      type='text'\n                      value={this.state.name}\n                      onChange={(value) => this.setState({ name: value.target.value })}\n                      class='form-control' name='nombre' placeholder='Nombre' autofocus\n                    />\n                  </div>\n\n                  <div class='row'>\n                    <div class='col-lg-3'>\n                      <div class='form-group'>\n                        <select\n                          class='form-control'\n                          value={this.state.departmentId}\n                          onChange={(value) => this.setState({ departmentId: value.target.value })}\n                        >\n                          <option selected disabled>Departamento</option>\n                          {this.state.departments}\n\n                        </select>\n                      </div>\n                    </div>\n\n                    <div class='col-lg-2'>\n                      <div class='form-group'>\n                        <select\n                          class='form-control'\n                          value={this.state.roleId}\n                          onChange={(value) => this.setState({ roleId: value.target.value })}\n                        >\n                          <option selected disabled>Rol</option>\n                          {this.state.roles}\n                        </select>\n                      </div>\n                    </div>\n\n                    <div class='col-lg-3'>\n                      <div class='form-group'>\n                        <select\n                          class='form-control'\n                          value={this.state.tutorId}\n                          onChange={(value) => this.setState({ tutorId: value.target.value })}\n                        >\n                          <option selected disabled>Tutoría</option>\n                          {this.state.tutors}\n                        </select>\n                      </div>\n                    </div>\n\n                  </div>\n\n                  <div class='form-group'>\n                    <textarea\n                      class='form-control'\n                      value={this.state.comment}\n                      onChange={(value) => this.setState({ comment: value.target.value })}\n                      placeholder='Introduzca si lo desea algún comentario: Me gusta J'\n                      rows='3'\n                    />\n                  </div>\n\n                  <div class='form-group'>\n                    <button type='submit' class='btn btn-success' onClick={() => this.updateProfessional()}>Actualizar</button>\n                  </div>\n                </div>\n              </div>\n            </div>\n\n            <div class='col-lg-3'>\n              <div class='card'>\n                <div class='card-body text-center'>\n                  <form class='md-form'>\n                    <div class='file-field'>\n                      <div class='md-4'>\n                        <img\n                          src={require('../images/profile-picture.jpg')}\n                          ref={profilePicture => this.myProfilePicture = profilePicture}\n                          id='blah'\n                          class='rounded-circle z-depth-1-half avatar-pic img-fluid img-thumbnail' alt='avatar'\n                        />\n\n                        <div style={{ marginTop: '10px' }} class='d-flex'>\n                          <div class='btn btn-mdb-color btn-rounded float-left custom-file'>\n                            <input\n                              style={{ width: '100%' }} ref={(myElement) => this.myFileElement = myElement}\n                              type='file'\n                              id='imgInput'\n                              className='custom-file-input btn btn-primary'\n                              onChange={(value) => { this.readURL(value.target); }}\n                            />\n                            <label class='custom-file-label' for='customFile'>Perfil</label>\n                          </div>\n                        </div>\n                      </div>\n\n                    </div>\n                  </form>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  readURL (input) {\n    ProfileController.readURL(input).then((res)=> {\n      if(res){\n        $('#blah').attr('src', res.data);\n      }\n    });\n  }\n\n  setearImagenEnHTML () {\n    if (this.state.image) {\n      // Setear imagen en html\n      $('#blah').attr('src', this.state.image.data);\n    }\n  }\n\n  validateFields () {\n    let emptyFields = '';\n    let count = 0;\n    const nombre = this.state.name;\n\n    if (nombre.replace(/\\s/g, '').length == 0) {\n      emptyFields += ' Nombre ';\n      count++;\n    }\n    if (this.state.departmentId == null) {\n      emptyFields += ' Departamento ';\n      count++;\n    }\n    if (this.state.roleId == null) {\n      emptyFields += ' Rol ';\n      count++;\n    }\n\n    // If there are errors\n    if (count > 0) {\n      Swal.fire({\n        position: 'center',\n        icon: 'error',\n        title: (count == 1 ? 'Falta el campo' : 'Faltan los campos: ') + emptyFields,\n        showConfirmButton: false,\n        timer: 2000\n      });\n      return false;\n    } else {\n      return true;\n    }\n  }\n\n  updateProfessional () {\n    if (this.validateFields() == false) {\n      return;\n    }\n\n    // parametros de datos post\n    const datapost = {\n      id: this.state.id,\n      name: this.state.name,\n      departmentId: this.state.departmentId,\n      roleId: this.state.roleId,\n      email: this.state.email,\n      tutorId: this.state.tutorId,\n      comment: this.state.comment,\n      image: this.state.image,\n      imageId: this.state.imageId\n    };\n\n    ProfessionalService.update(datapost)\n      .then(res => {\n        if (res.data.success) {\n          Swal.fire({\n            position: 'top',\n            icon: 'success',\n            title: 'Profesional actualizado correctamente!',\n            showConfirmButton: false,\n            timer: 2000\n          });\n        } else {\n          console.error('Error');\n        }\n      }).catch(error => {\n        console.error('Error 34 ' + error);\n      });\n  }\n}\n\nexport default profileComponent;\n"]},"metadata":{},"sourceType":"module"}